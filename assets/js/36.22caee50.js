(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{552:function(s,n,t){"use strict";t.r(n);var a=t(35),e=Object(a.a)({},(function(){var s=this,n=s.$createElement,t=s._self._c||n;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#å‰è¨€"}},[s._v("å‰è¨€")])]),t("li",[t("a",{attrs:{href:"#ä¸ºä»€ä¹ˆé€‰æ‹©es"}},[s._v("ä¸ºä»€ä¹ˆé€‰æ‹©ES")]),t("ul",[t("li",[t("a",{attrs:{href:"#åˆ†è¯"}},[s._v("åˆ†è¯")])]),t("li",[t("a",{attrs:{href:"#çº é”™"}},[s._v("çº é”™")])]),t("li",[t("a",{attrs:{href:"#ç›¸å…³åº¦æ‰“åˆ†"}},[s._v("ç›¸å…³åº¦æ‰“åˆ†")])]),t("li",[t("a",{attrs:{href:"#æ‹¼éŸ³æœç´¢"}},[s._v("æ‹¼éŸ³æœç´¢")])]),t("li",[t("a",{attrs:{href:"#åˆ†å¸ƒå¼é›†ç¾¤"}},[s._v("åˆ†å¸ƒå¼é›†ç¾¤")])]),t("li",[t("a",{attrs:{href:"#æœç´¢æ•ˆç‡"}},[s._v("æœç´¢æ•ˆç‡")])])])]),t("li",[t("a",{attrs:{href:"#å†å²èƒŒæ™¯"}},[s._v("å†å²èƒŒæ™¯")])]),t("li",[t("a",{attrs:{href:"#esæ”¯æŒçš„åŠŸèƒ½ç‰¹æ€§"}},[s._v("ESæ”¯æŒçš„åŠŸèƒ½ç‰¹æ€§")])]),t("li",[t("a",{attrs:{href:"#åŸºç¡€æ¦‚å¿µä»‹ç»"}},[s._v("åŸºç¡€æ¦‚å¿µä»‹ç»")])]),t("li",[t("a",{attrs:{href:"#å‚è€ƒ"}},[s._v("å‚è€ƒ")])])])]),t("p"),s._v(" "),t("h2",{attrs:{id:"å‰è¨€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‰è¨€"}},[s._v("#")]),s._v(" å‰è¨€")]),s._v(" "),t("ul",[t("li",[s._v("ESï¼ˆå…¨ç§° Elastic Searchï¼‰æ˜¯ä¸€æ¬¾å¼€æºã€è¿‘å®æ—¶ã€é«˜æ€§èƒ½çš„åˆ†å¸ƒå¼æœç´¢å¼•æ“ã€‚")]),s._v(" "),t("li",[s._v("åœ¨è¿‘ 3 å¹´çš„çƒ­é—¨æœç´¢å¼•æ“ç±»æ•°æ®ç»Ÿè®¡ä¸­ï¼ŒES éƒ½éœ¸å±…æ¦œé¦–ï¼ˆæ•°æ®æ¥æºï¼šDBRakingï¼‰ï¼Œå¯è§çš„å…¶æ·±å—å¤§å®¶çš„å–œçˆ±ã€‚")]),s._v(" "),t("li",[s._v("éšç€ ES çš„åŠŸèƒ½è¶Šæ¥è¶Šå¼ºå¤§ï¼Œå…¶å’Œæ•°æ®åº“çš„è¾¹ç•Œä¹Ÿè¶Šæ¥è¶Šå°ï¼Œé™¤äº†è¿›è¡Œå…¨æ–‡æ£€ç´¢ï¼ŒES ä¹Ÿæ”¯æŒèšåˆ/æ’åºã€‚")]),s._v(" "),t("li",[s._v("ES åº•å±‚åŸºäºLuceneå¼€å‘ï¼Œé’ˆå¯¹Luceneçš„å±€é™æ€§ï¼ŒES æä¾›äº† RESTful API é£æ ¼çš„æ¥å£ã€æ”¯æŒåˆ†å¸ƒå¼ã€å¯æ°´å¹³æ‰©å±•ï¼ŒåŒæ—¶å®ƒå¯ä»¥è¢«å¤šç§ç¼–ç¨‹è¯­è¨€è°ƒç”¨ã€‚")]),s._v(" "),t("li",[s._v("ES å¾ˆå¤šåŸºç¡€æ¦‚å¿µä»¥åŠåº•å±‚å®ç°å…¶æœ¬è´¨æ˜¯ Lucene çš„æ¦‚å¿µã€‚")])]),s._v(" "),t("h2",{attrs:{id:"ä¸ºä»€ä¹ˆé€‰æ‹©es"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆé€‰æ‹©es"}},[s._v("#")]),s._v(" ä¸ºä»€ä¹ˆé€‰æ‹©ES")]),s._v(" "),t("h3",{attrs:{id:"åˆ†è¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†è¯"}},[s._v("#")]),s._v(" åˆ†è¯")]),s._v(" "),t("p",[s._v("pythonå¼€å‘å·¥ç¨‹å¸ˆ--ã€‹pythonã€å¼€å‘ã€å·¥ç¨‹å¸ˆã€pythonå¼€å‘ã€å¼€å‘å·¥ç¨‹å¸ˆã€pythonå¼€å‘å·¥ç¨‹å¸ˆ")]),s._v(" "),t("h3",{attrs:{id:"çº é”™"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#çº é”™"}},[s._v("#")]),s._v(" çº é”™")]),s._v(" "),t("p",[s._v("ç›´æ¥æŒ‘åŠ¨--ã€‹ç»“æœèƒ½æ£€ç´¢å‡ºå­—èŠ‚è·³åŠ¨æ•°æ®")]),s._v(" "),t("h3",{attrs:{id:"ç›¸å…³åº¦æ‰“åˆ†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç›¸å…³åº¦æ‰“åˆ†"}},[s._v("#")]),s._v(" ç›¸å…³åº¦æ‰“åˆ†")]),s._v(" "),t("p",[s._v("relevance score(ç›¸å…³åº¦å¾—åˆ†)ç®—æ³•ï¼šè®¡ç®—å‡ºï¼Œä¸€ä¸ªç´¢å¼•ä¸­çš„æ–‡æœ¬ä¸æœç´¢æ–‡æœ¬ï¼Œä»–ä»¬ä¹‹é—´çš„å…³è”åŒ¹é…ç¨‹åº¦")]),s._v(" "),t("ul",[t("li",[s._v("Term")]),s._v(" "),t("li",[s._v("è¯é¢‘(TF)ï¼šä¸€ä¸ªæ–‡æ¡£å‡ºç°å¤šæ¬¡ï¼Œé‡è¦")]),s._v(" "),t("li",[s._v("é€†æ–‡æ¡£é¢‘ç‡ï¼šå¤šä¸ªæ–‡æ¡£å‡ºç°ï¼Œä¸é‡è¦")]),s._v(" "),t("li",[s._v("(IDF)")]),s._v(" "),t("li",[s._v("coord")]),s._v(" "),t("li",[s._v("boost")]),s._v(" "),t("li",[s._v("Â·Â·Â·")])]),s._v(" "),t("h3",{attrs:{id:"æ‹¼éŸ³æœç´¢"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ‹¼éŸ³æœç´¢"}},[s._v("#")]),s._v(" æ‹¼éŸ³æœç´¢")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("public class Position implements Serializable{\n\tprivate String name;\n\tprivate String pinyin;/nameå¯¹åº”å…¨æ‹¼\n\tprivate String header;/nameé¦–å­—æ¯ç¼©å†™\n\t......çœç•¥getter setter\n}\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"åˆ†å¸ƒå¼é›†ç¾¤"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åˆ†å¸ƒå¼é›†ç¾¤"}},[s._v("#")]),s._v(" åˆ†å¸ƒå¼é›†ç¾¤")]),s._v(" "),t("ul",[t("li",[s._v("å•è¡¨æ“ä½œæ•°æ®é‡æœ‰ç›¸å¯¹æœ€ä¼˜å€¼ï¼ŒMySOLä¸º1000ä¸‡å·¦å³ã€‚")]),s._v(" "),t("li",[s._v("ä¼ ç»Ÿæ•°æ®åº“åˆ†åº“åˆ†è¡¨å®ç°ç›¸å¯¹å¤æ‚")])]),s._v(" "),t("h3",{attrs:{id:"æœç´¢æ•ˆç‡"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æœç´¢æ•ˆç‡"}},[s._v("#")]),s._v(" æœç´¢æ•ˆç‡")]),s._v(" "),t("h2",{attrs:{id:"å†å²èƒŒæ™¯"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å†å²èƒŒæ™¯"}},[s._v("#")]),s._v(" å†å²èƒŒæ™¯")]),s._v(" "),t("ol",[t("li",[s._v("Lucene çš„å†å²èƒŒæ™¯\n"),t("ul",[t("li",[s._v("Doug Cuttingï¼Œä»–æ˜¯ Hadoop è¯­è¨€å’Œ Lucene å·¥å…·åŒ…çš„åˆ›å§‹äººã€‚Doug Cutting æ¯•ä¸šäºæ–¯å¦ç¦å¤§å­¦ï¼Œåœ¨ Xerox ç§¯ç´¯äº†ä¸€å®šçš„å·¥ä½œç»éªŒåï¼Œä» 1997 å¹´å¼€å§‹ï¼Œåˆ©ç”¨ä¸šä½™æ—¶é—´å¼€å‘å‡ºäº† Luceneã€‚Lucene é¢ä¸–äº 1999 å¹´ï¼Œå¹¶äº 2005 å¹´æˆä¸º Apache é¡¶çº§å¼€æºé¡¹ç›®ã€‚")]),s._v(" "),t("li",[s._v("Luceneçš„ç‰¹ç‚¹ï¼š\n"),t("ul",[t("li",[s._v("Luceneæ˜¯åŸºäº java ç¼–å†™çš„ï¼Œå¼€æºçš„å…¨æ–‡æ£€ç´¢å¼•æ“å·¥å…·åŒ…ã€‚")]),s._v(" "),t("li",[s._v("Luceneå…·æœ‰é«˜æ€§èƒ½ï¼šåœ¨ç›¸åŒçš„ç¡¬ä»¶ç¯å¢ƒä¸‹ï¼ŒåŸºäº Hadoop çš„ webmapï¼ˆLucene çš„ç¬¬ä¸€ä¸ªåº”ç”¨ï¼‰ çš„ååº”é€Ÿåº¦æ˜¯ä¹‹å‰ç³»ç»Ÿçš„ 33 å€ã€‚")])])]),s._v(" "),t("li",[s._v("Luceneçš„å±€é™æ€§ï¼š\n"),t("ul",[t("li",[s._v("ä»…é™äº java å¼€å‘ã€‚")]),s._v(" "),t("li",[s._v("ç±»åº“çš„æ¥å£å­¦ä¹ æˆæœ¬é«˜ï¼šæœ¬è´¨ä¸ŠLuceneå°±æ˜¯ä¸€ä¸ªç¼–ç¨‹åº“,å¯ä»¥æŒ‰åŸå§‹æ¥å£æ¥è°ƒç”¨ï¼Œä½†æ˜¯å¦‚æœåœ¨åº”ç”¨ç¨‹åºä¸­ç›´æ¥ä½¿ç”¨Luceneï¼Œéœ€è¦è¦†ç›–å¤§é‡çš„é›†æˆæ¡†æ¶å·¥ä½œã€‚")]),s._v(" "),t("li",[s._v("åŸç”Ÿå¹¶ä¸æ”¯æŒæ°´å¹³æ‰©å±•ï¼Œè‹¥éœ€å®ç°æµ·é‡æ•°æ®çš„æœç´¢å¼•æ“ï¼Œéœ€åœ¨æ­¤åŸºç¡€ä¸Šæ ¼å¤–å¼€å‘ä»¥æ”¯æŒåˆ†å¸ƒå¼ã€‚")])])])])]),s._v(" "),t("li",[s._v("ES çš„å†å²èƒŒæ™¯\n"),t("ul",[t("li",[s._v("ElasticSearchåˆ›å§‹äºº-Shay Banon")]),s._v(" "),t("li",[s._v("2004 å¹´ï¼ŒShay Banon åŸºäº Lucene å¼€å‘äº† Compassï¼Œåœ¨è€ƒè™‘ Compass çš„ç¬¬ä¸‰ä¸ªç‰ˆæœ¬æ—¶ï¼Œä»–æ„è¯†åˆ°æœ‰å¿…è¦é‡å†™ Compass çš„å¤§éƒ¨åˆ†å†…å®¹ï¼Œä»¥â€œåˆ›å»ºä¸€ä¸ªå¯æ‰©å±•çš„æœç´¢è§£å†³æ–¹æ¡ˆâ€ã€‚å› æ­¤ï¼Œä»–åˆ›å»ºäº†â€œä¸€ä¸ªä»å¤´æ„å»ºçš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆâ€ï¼Œå¹¶ä½¿ç”¨äº†ä¸€ä¸ªå…¬å…±æ¥å£ï¼Œå³ HTTP ä¸Šçš„ JSONï¼Œå®ƒä¹Ÿé€‚ç”¨äº Java ä»¥å¤–çš„ç¼–ç¨‹è¯­è¨€ã€‚")]),s._v(" "),t("li",[s._v("2010 å¹´ï¼ŒShay Banon åœ¨å‘å¸ƒäº† Elasticsearch çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ã€‚")]),s._v(" "),t("li",[s._v("ES å¤šä¸ªç‰ˆæœ¬å¯èƒ½å‡ºç°ç ´åæ€§å˜æ›´ï¼Œä¾‹å¦‚ï¼Œåœ¨ 6.xï¼ŒES ä¸å…è®¸ä¸€ä¸ª Index ä¸­å‡ºç°å¤šä¸ªTypeã€‚åœ¨ ES çš„å®˜ç½‘ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½å¯¹åº”ç€ä¸€ä¸ªä½¿ç”¨æ–‡æ¡£ã€‚")]),s._v(" "),t("li",[s._v("åœ¨ä½¿ç”¨ ES ä¹‹å‰ï¼Œæœ€å¥½å…ˆäº†è§£ ES çš„ç‰ˆæœ¬å†å²ã€‚ä¸‹é¢åˆ—å‡ºä¸€äº›æ¯”è¾ƒé‡å¤§çš„æ›´æ–°ç‰ˆæœ¬ï¼Œå¯ä»¥åœ¨äº†è§£äº†åŸºæœ¬æ¦‚å¿µä¹‹åå†çœ‹ã€‚")]),s._v(" "),t("li",[s._v("åˆå§‹ç‰ˆæœ¬0.7.0ï¼ˆ2010 å¹´ 5 æœˆ 14 æ—¥ï¼‰\n"),t("ul",[t("li",[s._v("Zen Discovery è‡ªåŠ¨å‘ç°æ¨¡å— - Groovy Client æ”¯æŒ - ç®€å•çš„æ’ä»¶ç®¡ç†æœºåˆ¶ - æ›´å¥½æ”¯æŒ ICU åˆ†è¯å™¨")])])]),s._v(" "),t("li",[s._v("1.0.0ï¼ˆ2014 å¹´ 2 æœˆ 14 æ—¥ï¼‰\n"),t("ul",[t("li",[s._v("æ”¯æŒèšåˆåˆ†æ Aggregations")]),s._v(" "),t("li",[s._v("CAT API æ”¯æŒ")]),s._v(" "),t("li",[s._v("Doc values å¼•å…¥")]),s._v(" "),t("li",[s._v("æ”¯æŒè”ç›ŸæŸ¥è¯¢")]),s._v(" "),t("li",[s._v("æ–­è·¯å™¨æ”¯æŒ")])])]),s._v(" "),t("li",[s._v("2.0.0ï¼ˆ2015 å¹´ 10 æœˆ 28 æ—¥ï¼‰\n"),t("ul",[t("li",[s._v("query/filter æŸ¥è¯¢åˆå¹¶ï¼Œéƒ½åˆå¹¶åˆ° query ä¸­ï¼Œæ ¹æ®ä¸åŒçš„ context æ‰§è¡Œä¸åŒçš„æŸ¥è¯¢")]),s._v(" "),t("li",[s._v("å¢åŠ äº† pipleline Aggregations åœ¨ ES ä¸­ï¼Œæœ‰ Query å’Œ Filter ä¸¤ç§ Context - Query Context ï¼šç›¸å…³æ€§ç®—åˆ†")]),s._v(" "),t("li",[s._v("Filter Context ï¼šä¸éœ€è¦ç®—åˆ†ï¼ˆYES OR NOï¼‰, å¯ä»¥åˆ©ç”¨ Cache è·å¾—æ›´å¥½çš„æ€§èƒ½")]),s._v(" "),t("li",[s._v("å­˜å‚¨å‹ç¼©å¯é…ç½®")]),s._v(" "),t("li",[s._v("Rivers æ¨¡å—è¢«ç§»é™¤")]),s._v(" "),t("li",[s._v("Multicast ç»„æ’­å‘ç°æˆä¸ºç»„ä»¶")])])]),s._v(" "),t("li",[s._v("5.0.0ï¼ˆ2016 å¹´ 10 æœˆ 26 æ—¥ï¼‰\n"),t("ul",[t("li",[s._v("Lucene 6.x çš„æ”¯æŒï¼Œç£ç›˜ç©ºé—´å°‘ä¸€åŠï¼›ç´¢å¼•æ—¶é—´å°‘ä¸€åŠï¼›æŸ¥è¯¢æ€§èƒ½æå‡ 25%ï¼›æ”¯æŒ IPV6ã€‚")]),s._v(" "),t("li",[s._v("Internal engine çº§åˆ«ç§»é™¤äº†ç”¨äºé¿å…åŒä¸€æ–‡æ¡£å¹¶å‘æ›´æ–°çš„ç«äº‰é”ï¼Œå¸¦æ¥ 15%-20%çš„æ€§èƒ½æå‡")]),s._v(" "),t("li",[s._v("Shrink API ï¼Œå®ƒå¯å°†åˆ†ç‰‡æ•°è¿›è¡Œæ”¶ç¼©æˆå®ƒçš„å› æ•°ï¼Œå¦‚ä¹‹å‰ä½ æ˜¯ 15 ä¸ªåˆ†ç‰‡ï¼Œä½ å¯ä»¥æ”¶ç¼©æˆ 5 ä¸ªæˆ–è€… 3 ä¸ªåˆæˆ–è€… 1 ä¸ªï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥æƒ³è±¡æˆè¿™æ ·ä¸€ç§åœºæ™¯ï¼Œåœ¨å†™å…¥å‹åŠ›éå¸¸å¤§çš„æ”¶é›†é˜¶æ®µï¼Œè®¾ç½®è¶³å¤Ÿå¤šçš„ç´¢å¼•ï¼Œå……åˆ†åˆ©ç”¨ shard çš„å¹¶è¡Œå†™èƒ½åŠ›ï¼Œç´¢å¼•å†™å®Œä¹‹åæ”¶ç¼©æˆæ›´å°‘çš„ shardï¼Œæé«˜æŸ¥è¯¢æ€§èƒ½")]),s._v(" "),t("li",[s._v("å¼•å…¥æ–°çš„å­—æ®µç±»å‹ Text/Keyword æ¥æ›¿æ¢ String")]),s._v(" "),t("li",[s._v("æä¾›äº† Painless è„šæœ¬ï¼Œä»£æ›¿ Groovy è„šæœ¬")]),s._v(" "),t("li",[s._v("æ–°å¢ Sliced Scroll ç±»å‹ï¼Œç°åœ¨ Scroll æ¥å£å¯ä»¥å¹¶å‘æ¥è¿›è¡Œæ•°æ®éå†äº†ã€‚æ¯ä¸ª Scroll è¯·æ±‚ï¼Œå¯ä»¥åˆ†æˆå¤šä¸ª Slice è¯·æ±‚ï¼Œå¯ä»¥ç†è§£ä¸ºåˆ‡ç‰‡ï¼Œå„ Slice ç‹¬ç«‹å¹¶è¡Œï¼Œåˆ©ç”¨ Scroll é‡å»ºæˆ–è€…éå†è¦å¿«å¾ˆå¤šå€ã€‚- é™åˆ¶ç´¢å¼•è¯·æ±‚å¤§å°ï¼Œé¿å…å¤§é‡å¹¶å‘è¯·æ±‚å‹å® ES")]),s._v(" "),t("li",[s._v("é™åˆ¶å•ä¸ªè¯·æ±‚çš„ shards æ•°é‡ï¼Œé»˜è®¤ 1000 ä¸ª")])])]),s._v(" "),t("li",[s._v("6.0.0ï¼ˆ2017 å¹´ 8 æœˆ 31 æ—¥ï¼‰\n"),t("ul",[t("li",[s._v("Index sortingï¼Œå³ç´¢å¼•é˜¶æ®µçš„æ’åºã€‚")]),s._v(" "),t("li",[s._v("é¡ºåºå·çš„æ”¯æŒï¼Œæ¯ä¸ª es çš„æ“ä½œéƒ½æœ‰ä¸€ä¸ªé¡ºåºç¼–å·ï¼ˆç±»ä¼¼å¢é‡è®¾è®¡ï¼‰")]),s._v(" "),t("li",[s._v("æ— ç¼æ»šåŠ¨å‡çº§")]),s._v(" "),t("li",[s._v("é€æ­¥åºŸå¼ƒ typeï¼Œåœ¨ 6.0 é‡Œé¢ï¼Œå¼€å§‹ä¸æ”¯æŒä¸€ä¸ª index é‡Œé¢å­˜åœ¨å¤šä¸ª type")]),s._v(" "),t("li",[s._v("Index-template inheritanceï¼Œç´¢å¼•ç‰ˆæœ¬çš„ç»§æ‰¿ï¼Œç›®å‰ç´¢å¼•æ¨¡æ¿æ˜¯æ‰€æœ‰åŒ¹é…çš„éƒ½ä¼šåˆå¹¶ï¼Œè¿™æ ·ä¼šé€ æˆç´¢å¼•æ¨¡æ¿æœ‰ä¸€äº›å†²çªé—®é¢˜ï¼Œ 6.0 å°†ä¼šåªåŒ¹é…ä¸€ä¸ªï¼Œç´¢å¼•åˆ›å»ºæ—¶ä¹Ÿä¼šè¿›è¡ŒéªŒè¯ - Load aware shard routingï¼Œ åŸºäºè´Ÿè½½çš„è¯·æ±‚è·¯ç”±ï¼Œç›®å‰çš„æœç´¢è¯·æ±‚æ˜¯å…¨èŠ‚ç‚¹è½®è¯¢ï¼Œé‚£ä¹ˆæ€§èƒ½æœ€æ…¢çš„èŠ‚ç‚¹å¾€å¾€ä¼šé€ æˆæ•´ä½“çš„å»¶è¿Ÿå¢åŠ ï¼Œæ–°çš„å®ç°æ–¹å¼å°†åŸºäºé˜Ÿåˆ—çš„è€—è´¹æ—¶é—´è‡ªåŠ¨è°ƒèŠ‚é˜Ÿåˆ—é•¿åº¦ï¼Œè´Ÿè½½é«˜çš„èŠ‚ç‚¹çš„é˜Ÿåˆ—é•¿åº¦å°†å‡å°‘ï¼Œè®©å…¶ä»–èŠ‚ç‚¹åˆ†æ‘Šæ›´å¤šçš„å‹åŠ›ï¼Œæœç´¢å’Œç´¢å¼•éƒ½å°†åŸºäºè¿™ç§æœºåˆ¶ã€‚- å·²ç»å…³é—­çš„ç´¢å¼•å°†ä¹Ÿæ”¯æŒ replica çš„è‡ªåŠ¨å¤„ç†ï¼Œç¡®ä¿æ•°æ®å¯é ã€‚")])])]),s._v(" "),t("li",[s._v("7.0.0ï¼ˆ2019 å¹´ 4 æœˆ 10 æ—¥ï¼‰\n"),t("ul",[t("li",[s._v("é›†ç¾¤è¿æ¥å˜åŒ–ï¼šTransportClient è¢«åºŸå¼ƒ ä»¥è‡³äºï¼Œes7 çš„ java ä»£ç ï¼Œåªèƒ½ä½¿ç”¨ restclient")]),s._v(" "),t("li",[s._v("é‡å¤§æ”¹è¿›-æ­£å¼åºŸé™¤å•ä¸ªç´¢å¼•ä¸‹å¤š Type çš„æ”¯æŒ")]),s._v(" "),t("li",[s._v("es6 æ—¶ï¼Œå®˜æ–¹å°±æåˆ°äº† es7 ä¼šåˆ é™¤ typeï¼Œå¹¶ä¸” es6 æ—¶å·²ç»è§„å®šæ¯ä¸€ä¸ª index åªèƒ½æœ‰ä¸€ä¸ª typeã€‚åœ¨ es7 ä¸­ä½¿ç”¨é»˜è®¤çš„_doc ä½œä¸º typeï¼Œå®˜æ–¹è¯´åœ¨ 8.x ç‰ˆæœ¬ä¼šå½»åº•ç§»é™¤ typeã€‚api è¯·æ±‚æ–¹å¼ä¹Ÿå‘é€å˜åŒ–ï¼Œå¦‚è·å¾—æŸç´¢å¼•çš„æŸ ID çš„æ–‡æ¡£ï¼šGET index/_doc/id å…¶ä¸­ index å’Œ id ä¸ºå…·ä½“çš„å€¼")]),s._v(" "),t("li",[s._v("Lucene9.0 - å¼•å…¥äº†çœŸæ­£çš„å†…å­˜æ–­è·¯å™¨ï¼Œå®ƒå¯ä»¥æ›´ç²¾å‡†åœ°æ£€æµ‹å‡ºæ— æ³•å¤„ç†çš„è¯·æ±‚ï¼Œå¹¶é˜²æ­¢å®ƒä»¬ä½¿å•ä¸ªèŠ‚ç‚¹ä¸ç¨³å®š - Zen2 æ˜¯ Elasticsearch çš„å…¨æ–°é›†ç¾¤åè°ƒå±‚ï¼Œæé«˜äº†å¯é æ€§ã€æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒï¼Œå˜å¾—æ›´å¿«ã€æ›´å®‰å…¨ï¼Œå¹¶æ›´æ˜“äºä½¿ç”¨ - æ–°åŠŸèƒ½ - New Cluster coordination - Feature - Complete High Level REST Client - Script Score Query - æ€§èƒ½ä¼˜åŒ– - Weak-AND ç®—æ³•æé«˜æŸ¥è¯¢æ€§èƒ½")]),s._v(" "),t("li",[s._v("é»˜è®¤çš„ Primary Shared æ•°ä» 5 æ”¹ä¸º 1ï¼Œé¿å… Over Sharding")]),s._v(" "),t("li",[s._v("shard ä¹Ÿæ˜¯ä¸€ç§èµ„æºï¼Œshard è¿‡å¤šä¼šå½±å“é›†ç¾¤çš„ç¨³å®šæ€§ã€‚å› ä¸º shard è¿‡å¤šï¼Œå…ƒä¿¡æ¯ä¼šå˜å¤šï¼Œè¿™äº›å…ƒä¿¡æ¯ä¼šå ç”¨å †å†…å­˜ã€‚shard è¿‡å¤šä¹Ÿä¼šå½±å“è¯»å†™æ€§èƒ½ï¼Œå› ä¸ºæ¯ä¸ªè¯»å†™è¯·æ±‚éƒ½éœ€è¦ä¸€ä¸ªçº¿ç¨‹ã€‚æ‰€ä»¥å¦‚æœ index æ²¡æœ‰å¾ˆå¤§çš„æ•°æ®é‡ï¼Œä¸éœ€è¦è®¾ç½®å¾ˆå¤š shardã€‚")]),s._v(" "),t("li",[s._v("æ›´å¿«çš„å‰ k ä¸ªæŸ¥è¯¢")]),s._v(" "),t("li",[s._v("é—´éš”æŸ¥è¯¢(Intervals queries) æŸäº›æœç´¢ç”¨ä¾‹ï¼ˆä¾‹å¦‚ï¼Œæ³•å¾‹å’Œä¸“åˆ©æœç´¢ï¼‰å¼•å…¥äº†æŸ¥æ‰¾å•è¯æˆ–çŸ­è¯­å½¼æ­¤ç›¸è·ä¸€å®šè·ç¦»çš„è®°å½•çš„éœ€è¦ã€‚Elasticsearch 7.0 ä¸­çš„é—´éš”æŸ¥è¯¢å¼•å…¥äº†ä¸€ç§æ„å»ºæ­¤ç±»æŸ¥è¯¢çš„å…¨æ–°æ–¹å¼ï¼Œä¸ä¹‹å‰çš„æ–¹æ³•ï¼ˆè·¨åº¦æŸ¥è¯¢ span queriesï¼‰ç›¸æ¯”ï¼Œä½¿ç”¨å’Œå®šä¹‰æ›´åŠ ç®€å•ã€‚ä¸è·¨åº¦æŸ¥è¯¢ç›¸æ¯”ï¼Œé—´éš”æŸ¥è¯¢å¯¹è¾¹ç¼˜æƒ…å†µçš„é€‚åº”æ€§æ›´å¼ºã€‚")])])])])])]),s._v(" "),t("h2",{attrs:{id:"esæ”¯æŒçš„åŠŸèƒ½ç‰¹æ€§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#esæ”¯æŒçš„åŠŸèƒ½ç‰¹æ€§"}},[s._v("#")]),s._v(" ESæ”¯æŒçš„åŠŸèƒ½ç‰¹æ€§")]),s._v(" "),t("blockquote",[t("p",[s._v("å…¨æ–‡æ£€ç´¢ï¼šåŸºäºå€’æ’ç´¢å¼•æœºåˆ¶çš„å…¨æ–‡æ£€ç´¢å·¥å…·ï¼Œæœç´¢æ•ˆç‡é«˜\nåˆ†è¯ï¼šESä¸­æœ‰å¯¹åº”çš„åˆ†è¯å™¨ä¹Ÿå¯ä»¥é›†æˆç¬¬ä¸‰æ–¹çš„åˆ†è¯å™¨\nçº é”™ï¼šESä¸­æœ‰å¯¹åº”çš„æ¨¡ç³ŠæŸ¥è¯¢\nç›¸å…³åº¦æ‰“åˆ†ï¼šESä¸­ä½¿ç”¨BM25ä½œä¸ºç›¸å…³åº¦æ‰“åˆ†ç®—æ³•\næ‹¼éŸ³æœç´¢ï¼šESä¸­ç»“åˆå¯¹åº”çš„æ‹¼éŸ³æ’ä»¶å¯ä»¥å¯¹æ‹¼éŸ³æœç´¢æ”¯æŒ\nå®æ—¶æ€§:ESå¯¹æµ·é‡æ•°æ®å…¨æ–‡æœç´¢éå¸¸å¿«è¿‘å®æ—¶æœç´¢\nå¯æ‰©å±•æ€§ï¼šESåˆ†å¸ƒå¼é›†ç¾¤å’Œæ‰©å±•å®ç°éå¸¸å®¹æ˜“\nELKï¼šElasticsearch,Logstashå’ŒKibanaè§£å†³æ–¹æ¡ˆ\næ™ºèƒ½æœç´¢å»ºè®®ï¼šTerm Phrase Completion Context Suggester\nESï¼šfilteræ‰§è¡ŒåŸç†bitsetæœºåˆ¶ä¸cachingæœºåˆ¶\nESæ§åˆ¶æœç´¢ç²¾å‡†åº¦ï¼šboost best fields dis_.max function_score\n......")])]),s._v(" "),t("h2",{attrs:{id:"åŸºç¡€æ¦‚å¿µä»‹ç»"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#åŸºç¡€æ¦‚å¿µä»‹ç»"}},[s._v("#")]),s._v(" åŸºç¡€æ¦‚å¿µä»‹ç»")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("index")]),s._v(" "),t("ul",[t("li",[s._v("Index ç¿»è¯‘è¿‡æ¥æ˜¯ç´¢å¼•çš„æ„æ€ã€‚åœ¨ ES é‡Œï¼Œç´¢å¼•æœ‰ä¸¤ä¸ªå«ä¹‰ï¼š\n"),t("ul",[t("li",[s._v("åè¯ï¼šä¸€ä¸ªç´¢å¼•ç›¸å½“äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„ä¸€ä¸ªè¡¨ï¼ˆåœ¨ 6.x ä»¥å‰ï¼Œä¸€ä¸ª index å¯ä»¥è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ•°æ®åº“ï¼‰")]),s._v(" "),t("li",[s._v("åŠ¨è¯ï¼šå°†ä¸€ä»½ document ä¿å­˜åœ¨ä¸€ä¸ª index é‡Œï¼Œè¿™ä¸ªè¿‡ç¨‹ä¹Ÿå¯ä»¥ç§°ä¸ºç´¢å¼•ã€‚")])])])])]),s._v(" "),t("li",[t("p",[s._v("type")]),s._v(" "),t("ul",[t("li",[s._v("åœ¨ 6.x ä¹‹å‰ï¼Œ index å¯ä»¥è¢«ç†è§£ä¸ºå…³ç³»å‹æ•°æ®åº“ä¸­çš„ã€æ•°æ®åº“ã€‘ï¼Œè€Œ type åˆ™å¯ä»¥è¢«è®¤ä¸ºæ˜¯ã€æ•°æ®åº“ä¸­çš„è¡¨ã€‘ã€‚ä½¿ç”¨ type å…è®¸æˆ‘ä»¬åœ¨ä¸€ä¸ª index é‡Œå­˜å‚¨å¤šç§ç±»å‹çš„æ•°æ®ï¼Œæ•°æ®ç­›é€‰æ—¶å¯ä»¥æŒ‡å®š type ã€‚type çš„å­˜åœ¨ä»æŸç§ç¨‹åº¦ä¸Šå¯ä»¥å‡å°‘ index çš„æ•°é‡ï¼Œä½†æ˜¯ type å­˜åœ¨ä»¥ä¸‹é™åˆ¶ï¼š\n"),t("ul",[t("li",[s._v("ä¸åŒ type é‡Œçš„å­—æ®µéœ€è¦ä¿æŒä¸€è‡´ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª index ä¸‹çš„ä¸åŒ type é‡Œæœ‰ä¸¤ä¸ªåå­—ç›¸åŒçš„å­—æ®µï¼Œä»–ä»¬çš„ç±»å‹ï¼ˆstring, date ç­‰ç­‰ï¼‰å’Œé…ç½®ä¹Ÿå¿…é¡»ç›¸åŒã€‚")]),s._v(" "),t("li",[s._v("åªåœ¨æŸä¸ª type é‡Œå­˜åœ¨çš„å­—æ®µï¼Œåœ¨å…¶ä»–æ²¡æœ‰è¯¥å­—æ®µçš„ type ä¸­ä¹Ÿä¼šæ¶ˆè€—èµ„æºã€‚")]),s._v(" "),t("li",[s._v("å¾—åˆ†æ˜¯ç”± index å†…çš„ç»Ÿè®¡æ•°æ®æ¥å†³å®šçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸€ä¸ª type ä¸­çš„æ–‡æ¡£ä¼šå½±å“å¦ä¸€ä¸ª type ä¸­çš„æ–‡æ¡£çš„å¾—åˆ†ã€‚")])])]),s._v(" "),t("li",[s._v("ä»¥ä¸Šé™åˆ¶è¦æ±‚æˆ‘ä»¬ï¼Œåªæœ‰åŒä¸€ä¸ª index çš„ä¸­çš„ type éƒ½æœ‰ç±»ä¼¼çš„æ˜ å°„ (mapping) æ—¶ï¼Œæ‰å‹‰å¼ºé€‚ç”¨ type ã€‚å¦åˆ™ï¼Œä½¿ç”¨å¤šä¸ª type å¯èƒ½æ¯”ä½¿ç”¨å¤šä¸ª index æ¶ˆè€—çš„èµ„æºæ›´å¤šã€‚")]),s._v(" "),t("li",[s._v("è¿™å¤§æ¦‚ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ ES å†³å®šåºŸå¼ƒ type è¿™ä¸ªæ¦‚å¿µï¼")])])]),s._v(" "),t("li",[t("p",[s._v("document")]),s._v(" "),t("ul",[t("li",[s._v("index ä¸­çš„å•æ¡è®°å½•ç§°ä¸º document ï¼ˆæ–‡æ¡£ï¼‰ï¼Œå¯ä»¥ç†è§£ä¸ºè¡¨ä¸­çš„ä¸€è¡Œæ•°æ®ã€‚å¤šæ¡ document ç»„æˆäº†ä¸€ä¸ª index ã€‚")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('"hits" : {\n    "total" : {\n      "value" : 3563,\n      "relation" : "eq"\n    },\n    "max_score" : 1.0,\n    "hits" : [\n      {\n        "_index" : "test",\n        "_type" : "_doc",\n        "_id" : "3073",\n        "_score" : 1.0,\n        "_source" : {\n   ...\n   }\n  }\n]\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("ul",[t("li",[s._v("ä¸Šå›¾ä¸º ES ä¸€æ¡æ–‡æ¡£æ•°æ®ï¼Œå…¶ä¸­ï¼š\n"),t("ul",[t("li",[s._v("_index ï¼šæ–‡æ¡£æ‰€å±ç´¢å¼•åç§°ã€‚")]),s._v(" "),t("li",[s._v("_type ï¼šæ–‡æ¡£æ‰€å±ç±»å‹åï¼ˆæ­¤å¤„å·²é»˜è®¤ä¸º_docï¼‰ã€‚")]),s._v(" "),t("li",[s._v("_id ï¼šDoc çš„ä¸»é”®ã€‚åœ¨å†™å…¥çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®šè¯¥ Doc çš„ ID å€¼ï¼Œå¦‚æœä¸æŒ‡å®šï¼Œåˆ™ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ UUID å€¼ã€‚")]),s._v(" "),t("li",[s._v("_score ï¼šé¡¾åæ€ä¹‰ï¼Œå¾—åˆ†ï¼Œä¹Ÿå¯ç§°ä¹‹ä¸ºç›¸å…³æ€§ï¼Œåœ¨æŸ¥è¯¢æ˜¯ ES ä¼š æ ¹æ®ä¸€äº›è§„åˆ™è®¡ç®—å¾—åˆ†ï¼Œå¹¶æ ¹æ®å¾—åˆ†è¿›è¡Œå€’æ’ã€‚é™¤æ­¤ä¹‹å¤–ï¼ŒES æ”¯æŒé€šè¿‡ Function score query åœ¨æŸ¥è¯¢æ—¶è‡ªå®šä¹‰ score çš„è®¡ç®—è§„åˆ™ã€‚")]),s._v(" "),t("li",[s._v("_source ï¼šæ–‡æ¡£çš„åŸå§‹ JSON æ•°æ®ã€‚")])])])])]),s._v(" "),t("li",[t("p",[s._v("field")]),s._v(" "),t("ul",[t("li",[s._v("ä¸€ä¸ª document ä¼šç”±ä¸€ä¸ªæˆ–å¤šä¸ª field ç»„æˆï¼Œfield æ˜¯ ES ä¸­æ•°æ®ç´¢å¼•çš„æœ€å°å®šä¹‰å•ä½ï¼Œä¸‹é¢ä»…åˆ—ä¸¾éƒ¨åˆ†å¸¸ç”¨çš„ç±»å‹ã€‚")]),s._v(" "),t("li",[s._v("âš ï¸ åœ¨ ES ä¸­ï¼Œæ²¡æœ‰æ•°ç»„ç±»å‹ï¼Œä»»ä½•å­—æ®µéƒ½å¯ä»¥å˜æˆæ•°ç»„ã€‚")]),s._v(" "),t("li",[t("strong",[s._v("string")])]),s._v(" "),t("li",[t("strong",[s._v("text")]),s._v(" "),t("ul",[t("li",[s._v("ç´¢å¼•å…¨æ–‡å€¼çš„å­—æ®µï¼Œä¾‹å¦‚ç”µå­é‚®ä»¶æ­£æ–‡æˆ–äº§å“æè¿°ã€‚")]),s._v(" "),t("li",[s._v("å¦‚æœæ‚¨éœ€è¦ç´¢å¼•ç»“æ„åŒ–å†…å®¹ï¼Œä¾‹å¦‚ç”µå­é‚®ä»¶åœ°å€ã€ä¸»æœºåã€çŠ¶æ€ä»£ç æˆ–æ ‡ç­¾ï¼Œæ‚¨å¯èƒ½åº”è¯¥ä½¿ç”¨ keyword å­—æ®µã€‚")]),s._v(" "),t("li",[s._v("å‡ºäºä¸åŒç›®çš„ï¼Œæˆ‘ä»¬æœŸæœ›ä»¥ä¸åŒæ–¹å¼ç´¢å¼•åŒä¸€å­—æ®µï¼Œè¿™å°±æ˜¯ multi-fields ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°† string å­—æ®µæ˜ å°„ä¸ºç”¨äºå…¨æ–‡æœç´¢çš„ text å­—æ®µï¼Œå¹¶æ˜ å°„ä¸ºç”¨äºæ’åºæˆ–èšåˆçš„ keyword å­—æ®µï¼š"),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('PUT my_index\n{\n  "mappings": {\n\t"properties": {\n\t  "city": {\n\t\t"type": "text",\n\t\t"fields": {\n\t\t  "raw": {\n\t\t\t"type":  "keyword"\n\t\t  }\n\t\t}\n\t  }\n\t}\n  }\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])])]),s._v(" "),t("li",[s._v("âš ï¸çº¯textå­—æ®µé»˜è®¤æ— æ³•è¿›è¡Œæ’åºæˆ–èšåˆ")]),s._v(" "),t("li",[s._v("âš ï¸ä½¿ç”¨textå­—æ®µä¸€å®šè¦ä½¿ç”¨åˆç†çš„åˆ†è¯å™¨")])])]),s._v(" "),t("li",[t("strong",[s._v("keyword")]),s._v(" "),t("ul",[t("li",[s._v("ç”¨äºç´¢å¼•ç»“æ„åŒ–å†…å®¹çš„å­—æ®µï¼Œä¾‹å¦‚ IDã€ç”µå­é‚®ä»¶åœ°å€ã€ä¸»æœºåã€çŠ¶æ€ä»£ç ã€é‚®æ”¿ç¼–ç æˆ–æ ‡ç­¾ã€‚å¦‚æœæ‚¨éœ€è¦ç´¢å¼•å…¨æ–‡å†…å®¹ï¼Œä¾‹å¦‚ç”µå­é‚®ä»¶æ­£æ–‡æˆ–äº§å“æè¿°ï¼Œä½ åº”è¯¥ä½¿ç”¨ text å­—æ®µã€‚")]),s._v(" "),t("li",[s._v("å®ƒä»¬é€šå¸¸ç”¨äºè¿‡æ»¤ï¼ˆæŸ¥æ‰¾æ‰€æœ‰å‘å¸ƒçŠ¶æ€çš„åšå®¢æ–‡ç« ï¼‰ã€æ’åºå’Œèšåˆã€‚keyword å­—æ®µåªèƒ½ç²¾ç¡®åŒ¹é…ã€‚")])])]),s._v(" "),t("li",[t("strong",[s._v("numeric")]),s._v(" "),t("ul",[t("li",[s._v("long, integer, short, byte, double, float, half_float, scaled_float...")]),s._v(" "),t("li",[s._v("å°±æ•´æ•°ç±»å‹ï¼ˆ byte ã€ short ã€ integer å’Œ long ï¼‰è€Œè¨€ï¼Œåº”è¯¥é€‰æ‹©è¶³ä»¥æ»¡è¶³ç”¨ä¾‹çš„æœ€å°ç±»å‹ã€‚")]),s._v(" "),t("li",[s._v("å¯¹äºæµ®ç‚¹ç±»å‹ï¼Œä½¿ç”¨ç¼©æ”¾å› å­å°†æµ®ç‚¹æ•°æ®å­˜å‚¨åˆ°æ•´æ•°ä¸­é€šå¸¸æ›´æœ‰æ•ˆï¼Œè¿™å°±æ˜¯ scaled_float ç±»å‹çš„å®ç°ã€‚")]),s._v(" "),t("li",[s._v("ä¸‹é¢è¿™ä¸ª caseï¼Œ scaling_factor ç¼©æ”¾å› å­è®¾ç½®ä¸º 100ï¼Œå¯¹äºæ‰€æœ‰çš„ API æ¥è¯´ï¼Œ price çœ‹èµ·æ¥éƒ½åƒæ˜¯ä¸€ä¸ªåŒç²¾åº¦æµ®ç‚¹æ•°ã€‚ä½†æ˜¯å¯¹äº ES å†…éƒ¨ï¼Œä»–å…¶å®æ˜¯ä¸€ä¸ªæ•´æ•° long ã€‚"),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('"price": {\n\t\t"type": "scaled_float",\n\t\t"scaling_factor": 100\n\t  }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])]),s._v(" "),t("li",[s._v("å¦‚æœ scaled_float æ— æ³•æ»¡è¶³ç²¾åº¦è¦æ±‚ï¼Œå¯ä»¥ä½¿ç”¨ double ã€ float ã€ half_float ã€‚")]),s._v(" "),t("li",[s._v("ä¸æ˜¯æ‰€æœ‰çš„å­—æ®µéƒ½é€‚åˆå­˜å‚¨ä¸º numberic ï¼Œnumberic ç±»å‹æ›´æ“…é•¿ range ç±»æŸ¥è¯¢ï¼Œç²¾ç¡®æŸ¥è¯¢å¯ä»¥å°è¯•ä½¿ç”¨ keyword ã€‚")])])]),s._v(" "),t("li",[t("strong",[s._v("mapping")]),s._v(" "),t("ul",[t("li",[s._v("mapping æ˜¯ä¸€ä¸ªå®šä¹‰ document ç»“æ„çš„è¿‡ç¨‹ï¼Œ mapping ä¸­å®šä¹‰äº†ä¸€ä¸ªæ–‡æ¡£æ‰€åŒ…å«çš„æ‰€æœ‰ field ä¿¡æ¯ã€‚")]),s._v(" "),t("li",[s._v("å®šä¹‰å­—æ®µç´¢å¼•è¿‡å¤šä¼šå¯¼è‡´çˆ†ç‚¸çš„æ˜ å°„,è¿™å¯èƒ½ä¼šå¯¼è‡´å†…å­˜ä¸è¶³é”™è¯¯å’Œéš¾ä»¥æ¢å¤çš„æƒ…å†µï¼Œ mapping æä¾›äº†ä¸€äº›é…ç½®å¯¹ field è¿›è¡Œé™åˆ¶ï¼Œä¸‹é¢åˆ—ä¸¾å‡ ä¸ªå¯èƒ½ä¼šæ¯”è¾ƒå¸¸è§çš„ï¼š\n"),t("ul",[t("li",[s._v("index.mapping.total_fields.limit é™åˆ¶ field çš„æœ€å¤§æ•°é‡ï¼Œé»˜è®¤å€¼æ˜¯ 1000ï¼ˆfield å’Œ object å†…çš„æ‰€æœ‰å­—æ®µï¼Œéƒ½ä¼šåŠ å…¥è®¡æ•°ï¼‰ã€‚")]),s._v(" "),t("li",[s._v("index.mapping.depth.limit é™åˆ¶ object çš„æœ€å¤§æ·±åº¦ï¼Œé»˜è®¤å€¼æ˜¯ 20ã€‚")]),s._v(" "),t("li",[s._v("index.mapping.field_name_length.limit é™åˆ¶ä¸­å­—æ®µåçš„é•¿åº¦ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰é™åˆ¶ã€‚")])])]),s._v(" "),t("li",[s._v("dynamic mapping\n"),t("ul",[t("li",[s._v("åœ¨ç´¢å¼• document æ—¶ï¼ŒES çš„åŠ¨æ€ mapping ä¼šå°†æ–°å¢å†…å®¹ä¸­ä¸å­˜åœ¨çš„å­—æ®µï¼Œè‡ªåŠ¨çš„åŠ å…¥åˆ°æ˜ å°„å…³ç³»ä¸­ã€‚ES ä¼šè‡ªåŠ¨æ£€æµ‹æ–°å¢å­—æ®µçš„é€»è¾‘ï¼Œå¹¶èµ‹äºˆå…¶é»˜è®¤å€¼ã€‚")]),s._v(" "),t("li",[s._v("One of the most important features of Elasticsearch is that it tries to get out of your way and let you start exploring your data as quickly as possible.")]),s._v(" "),t("li",[s._v("You know more about your data than Elasticsearch can guess, so while dynamic mapping can be useful to get started, at some point you will want to specify your own explicit mappings.")]),s._v(" "),t("li",[s._v("æˆªå–äº†éƒ¨åˆ† ES å®˜æ–¹æ–‡æ¡£ä¸­çš„è¯æœ¯ï¼ŒES è®¤ä¸ºä¸€äº›è‡ªåŠ¨åŒ–çš„æ“ä½œä¼šè®©æ–°æ‰‹ä¸Šæ‰‹æ›´å®¹æ˜“ã€‚ä½†æ˜¯åŒæ—¶ï¼Œåˆæå‡ºï¼Œä½ è‚¯å®šæ¯” ES æ›´äº†è§£ä½ çš„æ•°æ®ï¼Œå¯èƒ½åˆšå¼€å§‹ä½¿ç”¨èµ·æ¥è§‰å¾—æ¯”è¾ƒæ–¹ä¾¿ï¼Œä½†æ˜¯æœ€å¥½è¿˜æ˜¯è‡ªå·±æ˜ç¡®å®šä¹‰æ˜ å°„å…³ç³»ã€‚")]),s._v(" "),t("li",[s._v("ï¼ˆğŸ™„ï¸ ä¸ªäººè®¤ä¸ºï¼Œè¿™äº›è‡ªåŠ¨æ“ä½œæ˜¯åœ¨ç”¨æˆ·å¯¹ ES æ²¡æœ‰å¤ªå¤šäº†è§£çš„æƒ…å†µä¸‹è¿›è¡Œçš„ï¼Œå¦‚æœåˆšå¼€å§‹ä¾èµ–äº†è¿™äº›é»˜è®¤çš„æ“ä½œï¼Œä¾‹å¦‚ï¼šæ–°å¢å­—æ®µä½¿ç”¨äº† ES èµ‹äºˆçš„é»˜è®¤å€¼ï¼Œå¦‚æœåç»­æœ‰åˆ†æã€æ’åºã€èšåˆç­‰æ“ä½œå¯èƒ½ä¼šæœ‰ä¸€å®šé™åˆ¶ï¼‰ã€‚")]),s._v(" "),t("li",[s._v("âš ï¸ åœ¨ ES ä¸­ï¼Œåˆ é™¤/å˜æ›´ field å®šä¹‰ï¼Œéœ€è¦è¿›è¡Œ reindex ï¼Œæ‰€ä»¥åœ¨æ„å»º mapping ç»“æ„æ—¶è®°å¾—è¯„ä¼°å¥½å­—æ®µçš„ç”¨é€”ï¼Œä»¥ä½¿ç”¨æœ€åˆé€‚çš„å­—æ®µç±»å‹ã€‚")])])])])])])]),s._v(" "),t("li",[t("p",[s._v("éƒ¨åˆ†æŸ¥è¯¢å…³é”®å­—ä»‹ç»")]),s._v(" "),t("ul",[t("li",[s._v("matchä¸match_phrase\n"),t("ul",[t("li",[s._v("match ï¼šç”¨äºæ‰§è¡Œå…¨æ–‡æŸ¥è¯¢çš„æ ‡å‡†æŸ¥è¯¢ï¼ŒåŒ…æ‹¬æ¨¡ç³ŠåŒ¹é…å’ŒçŸ­è¯­æˆ–æ¥è¿‘æŸ¥è¯¢ã€‚é‡è¦å‚æ•°ï¼šæ§åˆ¶ Token ä¹‹é—´çš„å¸ƒå°”å…³ç³»ï¼šoperatorï¼šor/and")]),s._v(" "),t("li",[s._v("match_phrase ï¼šä¸ match æŸ¥è¯¢ç±»ä¼¼ä½†ç”¨äºåŒ¹é…ç¡®åˆ‡çš„çŸ­è¯­æˆ–å•è¯æ¥è¿‘åŒ¹é…ã€‚é‡è¦å‚æ•°ï¼šToken ä¹‹é—´çš„ä½ç½®è·ç¦»ï¼šslop å‚æ•°ï¼Œé»˜è®¤ä¸º 0")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('GET /_analyze\n{\n  "text": ["è¿™æ˜¯æµ‹è¯•"],\n  "analyzer": "ik_smart"\n}\n//Result\n{\n  "tokens" : [\n\t{\n\t  "token" : "è¿™æ˜¯",\n\t  "start_offset" : 0,\n\t  "end_offset" : 2,\n\t  "type" : "CN_WORD",\n\t  "position" : 0\n\t},\n\t{\n\t  "token" : "æµ‹è¯•",\n\t  "start_offset" : 2,\n\t  "end_offset" : 4,\n\t  "type" : "CN_WORD",\n\t  "position" : 1\n\t}\n  ]\n}\n\n//match+analyzer:ik_smart\n//å¯ä»¥æŸ¥è¯¢åˆ°æ‰€æœ‰describeä¸­åŒ…å«ã€è¿™æ˜¯æµ‹è¯•ã€‘ã€ã€è¿™æ˜¯ã€‘ã€ã€æµ‹è¯•ã€‘çš„doc\nGET /doraon_recommend_tab_test/_search\n{\n  "query": {\n\t"match": {\n\t  "describe":{\n\t  "query": "è¿™æ˜¯æµ‹è¯•",\n\t  "analyzer": "ik_smart"\n\t  }\n\t}\n  }\n}\n\n//match_phrase + analyzer:ik_smart + slop=0(é»˜è®¤)\n//å¯ä»¥æŸ¥è¯¢åˆ°æ‰€æœ‰describeä¸­åŒ…å«ã€è¿™æ˜¯ã€‘+ã€æµ‹è¯•ã€‘tokené—´éš”ä¸º0çš„docï¼ˆè¯´äººè¯å°±æ˜¯ï¼šæ¨¡ç³ŠåŒ¹é…ã€è¿™æ˜¯æµ‹è¯•ã€‘ï¼‰\nGET /doraon_recommend_tab_test/_search\n{\n  "_source": "describe",\n  "query": {\n\t"match_phrase": {\n\t  "describe": "è¿™æ˜¯æµ‹è¯•"\n\t}\n  }\n}\n\n//match_phrase + analyzer:ik_smart + slop=1\n//å¯ä»¥æŸ¥è¯¢åˆ°æ‰€æœ‰describeä¸­åŒ…å«ã€è¿™æ˜¯ã€‘+ã€æµ‹è¯•ã€‘tokené—´éš”ä¸º1çš„doc\n//ä¾‹å¦‚æŸä¸ªdocä¸­describeä¸ºã€è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ã€‘ï¼Œã€è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•ã€‘åˆ†è¯åçš„tokenåˆ†åˆ«ä¸ºã€è¿™æ˜¯ã€‘ã€ä¸€ä¸ªã€‘ã€æµ‹è¯•ã€‘\n//ã€è¿™æ˜¯ã€‘å’Œã€æµ‹è¯•ã€‘ä¹‹é—´é—´éš”äº†1ä¸ªtokenã€ä¸€ä¸ªã€‘ï¼Œæ‰€ä»¥å¯ä»¥è¢«æŸ¥è¯¢åˆ°ï¼›åŒç†ã€è¿™æ˜¯ä¸€ä¸ªæˆ‘çš„æµ‹è¯•ã€‘æŸ¥è¯¢ä¸åˆ°\nGET /test/_search\n{\n  "query": {\n\t"match_phrase": {\n\t  "describe":{\n\t\t"query": "è¿™æ˜¯æµ‹è¯•",\n\t\t"analyzer": "ik_smart",\n\t\t"slop": 1\n\t  }\n\t}\n  }\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br")])])]),s._v(" "),t("li",[s._v("term\n"),t("ul",[t("li",[s._v("term æ˜¯è¿›è¡Œç²¾ç¡®æŸ¥æ‰¾çš„å…³é”®ï¼›åœ¨ Lucene ä¸­ï¼Œterm æ˜¯ä¸­ç´¢å¼•å’Œæœç´¢çš„æœ€å°å•ä½ã€‚ä¸€ä¸ª field ä¼šç”±ä¸€ä¸ªæˆ–å¤šä¸ª term ç»„æˆï¼Œ term æ˜¯ç”± field ç»è¿‡ Analyzerï¼ˆåˆ†è¯ï¼‰äº§ç”Ÿã€‚Term Dictionary å³ term è¯å…¸ï¼Œæ˜¯æ ¹æ®æ¡ä»¶æŸ¥æ‰¾ term çš„åŸºæœ¬ç´¢å¼•ã€‚\n"),t("ul",[t("li",[s._v("é¿å…å¯¹ text å­—æ®µä½¿ç”¨æœ¯è¯­æŸ¥è¯¢ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒES ä¼šåœ¨åˆ†æè¿‡ç¨‹ä¸­æ›´æ”¹æ–‡æœ¬å­—æ®µçš„å€¼ã€‚è¿™ä¼šä½¿æŸ¥æ‰¾ text å­—æ®µå€¼çš„ç²¾ç¡®åŒ¹é…å˜å¾—å›°éš¾ã€‚è¦æœç´¢ text å­—æ®µå€¼ï¼Œå¼ºçƒˆå»ºè®®æ”¹ç”¨ match æŸ¥è¯¢ã€‚")]),s._v(" "),t("li",[s._v("âš ï¸é»˜è®¤åˆ†è¯æƒ…å†µä¸‹ï¼Œæ— è®ºæ˜¯ term è¿˜æ˜¯ match ï¼Œéƒ½æ— æ³•åˆ¤æ–­text ç±»å‹å­—æ®µæ˜¯å¦ä¸ºç©ºå­—ç¬¦ä¸²")]),s._v(" "),t("li",[s._v("ä»¥ä¸Šä¸¤ç‚¹å‡æ˜¯å› ä¸º text å­—æ®µå­˜å‚¨çš„æ˜¯åˆ†è¯ç»“æœï¼Œå¦‚æœå­—æ®µå€¼ä¸ºç©ºï¼Œåˆ†è¯ç»“æœå°†ä¸ä¼šå­˜å‚¨ term ä¿¡æ¯ï¼Œ keyword å­—æ®µå­˜å‚¨çš„æ˜¯åŸå§‹å†…å®¹ã€‚")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('GET /test/_termvectors/123?fields=content\n{\n  "_index" : "[your index]",\n  "_type" : "_doc",\n  "_id" : "123",\n  "_version" : 2,\n  "found" : true,\n  "took" : 0,\n  "term_vectors" : { }\n}\n\nGET /test/_termvectors/234?fields=card_pic\n{\n  "_index" : "[your index]",\n  "_type" : "_doc",\n  "_id" : "234",\n  "_version" : 1,\n  "found" : true,\n  "took" : 0,\n  "term_vectors" : {\n\t"card_pic" : {\n\t  "field_statistics" : {\n\t\t"sum_doc_freq" : 183252,\n\t\t"doc_count" : 183252,\n\t\t"sum_ttf" : 183252\n\t  },\n\t  "terms" : {\n\t\t"" : {\n\t\t  "term_freq" : 1,\n\t\t  "tokens" : [\n\t\t\t{\n\t\t\t  "position" : 0,\n\t\t\t  "start_offset" : 0,\n\t\t\t  "end_offset" : 0\n\t\t\t}\n\t\t  ]\n\t\t}\n\t  }\n\t}\n  }\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br")])])])])])])]),s._v(" "),t("li",[t("p",[s._v("åˆ†æå™¨ Analyzer")]),s._v(" "),t("ul",[t("li",[s._v("Analyzer ä¸»è¦æ˜¯å¯¹è¾“å…¥çš„æ–‡æœ¬ç±»å†…å®¹è¿›è¡Œåˆ†æï¼ˆé€šå¸¸æ˜¯åˆ†è¯ï¼‰ï¼Œå°†åˆ†æç»“æœä»¥ term çš„å½¢å¼è¿›è¡Œå­˜å‚¨ã€‚")]),s._v(" "),t("li",[s._v("Analyzer ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼šCharacter Filtersã€Tokenizerã€Token Filters\n"),t("ul",[t("li",[s._v("Character Filters\n"),t("ul",[t("li",[s._v("Character Filters ä»¥ characters æµçš„æ–¹å¼æ¥æ”¶åŸå§‹æ•°æ®ï¼Œå®ƒå¯ä»¥æ”¯æŒ characters çš„å¢ã€åˆ ã€æ”¹ï¼Œé€šå¸¸å†…ç½®çš„åˆ†æå™¨éƒ½æ²¡æœ‰è®¾ç½®é»˜è®¤çš„ Character Filtersã€‚ES å†…ç½®çš„ Character Filtersï¼š\n"),t("ul",[t("li",[s._v("HTML Strip Character Filterï¼šæ”¯æŒå‰”é™¤ html æ ‡ç­¾ï¼Œè§£ç ")]),s._v(" "),t("li",[s._v("Mapping Character Filterï¼šæ”¯æŒæ ¹æ®å®šä¹‰çš„æ˜ å°„è¿›è¡Œæ›¿æ¢")]),s._v(" "),t("li",[s._v("Pattern Replace Character Filterï¼šæ”¯æŒæ ¹æ®æ­£åˆ™è¿›è¡Œæ›¿æ¢")])])])])]),s._v(" "),t("li",[s._v("Tokenizer\n"),t("ul",[t("li",[s._v("Tokenizer æ¥æ”¶ä¸€ä¸ªå­—ç¬¦æµï¼Œåˆ†è§£æˆç‹¬ç«‹çš„ tokens(é€šå¸¸å°±æ˜¯æŒ‡çš„åˆ†è¯)ï¼Œå¹¶ä¸”è¾“å‡º tokensã€‚ä¾‹å¦‚,ä¸€ä¸ª whitespace tokenizerï¼ˆç©ºæ ¼ tokenizerï¼‰ï¼Œä»¥ç©ºæ ¼ä½œä¸ºåˆ†å‰²è¯å¯¹è¾“å…¥å†…å®¹è¿›è¡Œåˆ†è¯ã€‚ä¾‹å¦‚ï¼šå‘ whitespace tokenizer è¾“å…¥â€œQuick brown fox!â€ï¼Œå°†ä¼šè¾“å‡ºâ€œQuickâ€ã€ â€œbrownâ€ã€â€œfox!â€ 3 ä¸ª tokenã€‚")])])]),s._v(" "),t("li",[s._v("Token Filters\n"),t("ul",[t("li",[s._v("Token filters æ¥æ”¶ Tokenizer è¾“å‡ºçš„ token åºåˆ—ï¼Œå®ƒå¯ä»¥æ ¹æ®é…ç½®è¿›è¡Œ token çš„å¢ã€åˆ ã€æ”¹ã€‚ä¾‹å¦‚ï¼šæŒ‡å®š synonyms å¢åŠ  tokenã€æŒ‡å®š remove stopwords è¿›è¡Œ token åˆ é™¤ï¼ŒæŠ‘æˆ–æ˜¯ä½¿ç”¨ lowercasing è¿›è¡Œå°å†™è½¬æ¢ã€‚")])])])])]),s._v(" "),t("li",[s._v("ES å†…ç½®çš„åˆ†æå™¨æœ‰Standard Analyzerã€Simple Analyzerã€Whitespace Analyzerã€Stop Analyzerã€Keyword Analyzerã€Pattern Analyzerã€Language Analyzersã€Fingerprint Analyzerï¼Œå¹¶ä¸”æ”¯æŒå®šåˆ¶åŒ–ã€‚")]),s._v(" "),t("li",[s._v("è¿™é‡Œçš„å†…ç½®åˆ†è¯å™¨çœ‹èµ·æ¥éƒ½æ¯”è¾ƒç®€å•ï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ Standard Analyzerã€Keyword Analyzerï¼Œå…¶ä»–çš„åˆ†è¯å™¨å¤§å®¶æ„Ÿå…´è¶£å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ã€‚\n"),t("ul",[t("li",[s._v("text ç±»å‹é»˜è®¤ analyzerï¼šStandard Analyzer\n"),t("ul",[t("li",[s._v("Standard Analyzer çš„ç»„æˆéƒ¨åˆ†ï¼š\n"),t("ul",[t("li",[s._v("TokenizerStandard Tokenizerï¼šåŸºäº Unicode æ–‡æœ¬åˆ†å‰²ç®—æ³•-Unicode æ ‡å‡†é™„ä»¶# 29ï¼Œæ”¯æŒä½¿ç”¨ max_token_length å‚æ•°æŒ‡å®š token é•¿åº¦ï¼Œé»˜è®¤ä¸º 255ã€‚")]),s._v(" "),t("li",[s._v("Token Filters\n"),t("ul",[t("li",[s._v("Lower Case Token Filter")]),s._v(" "),t("li",[s._v("Stop Token Filter ï¼šé»˜è®¤æ²¡æœ‰ stop token/wordsï¼Œéœ€é€šè¿‡å‚æ•° stopwords æˆ– stopwords_path è¿›è¡ŒæŒ‡å®šã€‚")])])])])]),s._v(" "),t("li",[s._v("å¦‚æœ text ç±»å‹æ²¡æœ‰æŒ‡å®š Analyzerï¼ŒStandard Analyzerï¼Œå‰é¢æˆ‘ä»¬å·²ç»äº†è§£äº† ES åˆ†æå™¨çš„ç»“æ„ï¼Œç†è§£å®ƒçš„åˆ†æå™¨åº”è¯¥ä¸åœ¨è¯ä¸‹ã€‚Unicode æ–‡æœ¬åˆ†å‰²ç®—æ³•ä¾æ®çš„æ ‡å‡†ï¼Œç»™å‡ºäº†æ–‡æœ¬ä¸­è¯ç»„ã€å•è¯ã€å¥å­çš„é»˜è®¤åˆ†å‰²è¾¹ç•Œã€‚è¯¥é™„ä»¶åœ¨ notes ä¸­æåˆ°ï¼Œåƒç±»ä¼¼ä¸­æ–‡è¿™ç§å¤æ‚çš„è¯­è¨€ï¼Œå¹¶æ²¡æœ‰æ˜ç¡®çš„åˆ†å‰²è¾¹ç•Œï¼Œç®€è€Œè¨€ä¹‹å°±æ˜¯è¯´ï¼Œä¸­æ–‡å¹¶ä¸é€‚ç”¨äºè¿™ä¸ªæ ‡å‡†ã€‚")]),s._v(" "),t("li",[s._v("é€šå¸¸æˆ‘ä»¬çš„å…¨æ–‡æ£€ç´¢ä½¿ç”¨åœºæ™¯éƒ½æ˜¯é’ˆå¯¹ä¸­æ–‡çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨åˆ›å»ºæˆ‘ä»¬çš„æ˜ å°„å…³ç³»æ—¶ï¼Œä¸€å®šè¦æŒ‡å®šåˆé€‚çš„åˆ†æå™¨ã€‚")])])]),s._v(" "),t("li",[s._v("keyword ç±»å‹é»˜è®¤ analyzerï¼šKeyword Analyzer\n"),t("ul",[t("li",[s._v('Keyword Analyzer æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ª"noop" Analyzerï¼Œç›´æ¥å°†è¾“å…¥çš„å†…å®¹ä½œä¸ºä¸€æ•´ä¸ª tokenã€‚')])])]),s._v(" "),t("li",[s._v("ç¬¬ä¸‰æ–¹ä¸­æ–‡åˆ†è¯å™¨ ik\n"),t("ul",[t("li",[s._v("github åœ°å€ï¼šhttps://github.com/medcl/elasticsearch-analysis-ik")]),s._v(" "),t("li",[s._v("IK Analyzer æ˜¯ä¸€ä¸ªå¼€æºçš„ï¼ŒåŸºäº java è¯­è¨€å¼€å‘çš„è½»é‡çº§çš„ä¸­æ–‡åˆ†è¯å·¥å…·åŒ…ã€‚ä» 2006 å¹´ 12 æœˆæ¨å‡º 1.0 ç‰ˆå¼€å§‹ï¼Œ IKAnalyzer å·²ç»æ¨å‡ºäº† 4 ä¸ªå¤§ç‰ˆæœ¬ã€‚æœ€åˆï¼Œå®ƒæ˜¯ä»¥å¼€æºé¡¹ç›® Luence ä¸ºåº”ç”¨ä¸»ä½“çš„ï¼Œç»“åˆè¯å…¸åˆ†è¯å’Œæ–‡æ³•åˆ†æç®—æ³•çš„ä¸­æ–‡åˆ†è¯ç»„ä»¶ã€‚ä» 3.0 ç‰ˆæœ¬å¼€å§‹ï¼ŒIK å‘å±•ä¸ºé¢å‘ Java çš„å…¬ç”¨åˆ†è¯ç»„ä»¶ï¼Œç‹¬ç«‹äº Lucene é¡¹ç›®ï¼ŒåŒæ—¶æä¾›äº†å¯¹ Lucene çš„é»˜è®¤ä¼˜åŒ–å®ç°ã€‚åœ¨ 2012 ç‰ˆæœ¬ä¸­ï¼ŒIK å®ç°äº†ç®€å•çš„åˆ†è¯æ­§ä¹‰æ’é™¤ç®—æ³•ï¼Œæ ‡å¿—ç€ IK åˆ†è¯å™¨ä»å•çº¯çš„è¯å…¸åˆ†è¯å‘æ¨¡æ‹Ÿè¯­ä¹‰åˆ†è¯è¡åŒ–ã€‚")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('ä½¿ç”¨æ–¹å¼ï¼š\n\n// mappingåˆ›å»º\nPUT /[your index]\n{\n  "mappings": {\n\t"properties": {\n\t  "text_test":{\n\t\t"type": "text",\n\t\t"analyzer": "ik_smart"\n\t  }\n\t}\n  }\n}\n\n// æ–°å»ºdocument\nPOST /[your index]/_doc\n{\n  "text_test":"æˆ‘çˆ±ä¸­å›½"\n}\n\n//æŸ¥çœ‹term vector\nGET /[your index]/_termvectors/ste3HYABZRKvoZUCe2oH?fields=text_test\n//ç»“æœåŒ…å«äº† â€œæˆ‘â€â€œçˆ±â€â€œä¸­å›½â€\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])])])])])])]),s._v(" "),t("li",[t("p",[s._v("ç›¸ä¼¼æ€§å¾—åˆ† similarity")]),s._v(" "),t("ul",[t("li",[s._v("classicï¼šåŸºäº TF/IDF å®ç°ï¼ŒV7 å·²ç¦æ­¢ä½¿ç”¨ï¼ŒV8 å½»åº•åºŸé™¤ï¼ˆä»…ä¾›äº†è§£ï¼‰\n"),t("ul",[t("li",[s._v("TF/IDF ä»‹ç»æ–‡ç« ï¼šhttps://zhuanlan.zhihu.com/p/31197209")]),s._v(" "),t("li",[t("img",{attrs:{src:"TFIDF.jpg",alt:""}})]),s._v(" "),t("li",[s._v("TF/IDF ä½¿ç”¨é€†æ–‡æ¡£é¢‘ç‡ä½œä¸ºæƒé‡ï¼Œé™ä½å¸¸è§è¯æ±‡å¸¦æ¥çš„ç›¸ä¼¼æ€§å¾—åˆ†ã€‚ä»å…¬å¼ä¸­å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªç›¸ä¼¼æ€§ç®—æ³•ä»…ä¸æ–‡æ¡£è¯é¢‘ç›¸å…³ï¼Œè¦†ç›–ä¸å¤Ÿå…¨é¢ã€‚ä¾‹å¦‚ï¼šç¼ºå°‘æ–‡æ¡£é•¿åº¦å¸¦æ¥çš„æƒé‡ï¼Œå½“å…¶ä»–æ¡ä»¶ç›¸åŒï¼Œâ€œç‹è€…è£è€€â€è¿™ä¸ªæŸ¥è¯¢å…³é”®å­—åŒæ—¶å‡ºç°åœ¨çŸ­ç¯‡æ–‡æ¡£å’Œé•¿ç¯‡æ–‡æ¡£ä¸­æ—¶ï¼ŒçŸ­ç¯‡æ–‡æ¡£çš„ç›¸ä¼¼æ€§å…¶å®æ›´é«˜ã€‚")]),s._v(" "),t("li",[s._v("åœ¨ ESV5 ä¹‹å‰ï¼ŒES ä½¿ç”¨çš„æ˜¯ Lucene åŸºäº TF/IDF è‡ªå®ç°çš„ä¸€å¥—ç›¸å…³æ€§å¾—åˆ†ç®—æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š"),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("score(q,d)  =\n\t\t\tqueryNorm(q)\n\t\t  Â· coord(q,d)\n\t\t  Â· âˆ‘ (\n\t\t\t\ttf(t in d)\n\t\t\t  Â· idf(t)Â²\n\t\t\t  Â· t.getBoost()\n\t\t\t  Â· norm(t,d)\n\t\t\t) (t in q)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("ul",[t("li",[s._v("queryNormï¼šquery normalization factor æŸ¥è¯¢æ ‡å‡†åŒ–å› å­ï¼Œæ—¨åœ¨è®©ä¸åŒæŸ¥è¯¢ä¹‹é—´çš„ç›¸å…³æ€§ç»“æœå¯ä»¥è¿›è¡Œæ¯”è¾ƒï¼ˆå®é™…ä¸Š ES çš„ tips ä¸­æåˆ°ï¼Œå¹¶ä¸æ¨èå¤§å®¶è¿™æ ·åšï¼Œä¸åŒæŸ¥è¯¢ä¹‹é—´çš„å†³å®šæ€§å› ç´ æ˜¯ä¸ä¸€æ ·çš„ï¼‰")]),s._v(" "),t("li",[s._v("coordï¼šcoordination factor åè°ƒå› å­ï¼Œquery ç»è¿‡åˆ†æå¾—åˆ°çš„ terms åœ¨æ–‡ç« ä¸­å‘½ä¸­çš„æ•°é‡è¶Šå¤šï¼Œcoord å€¼è¶Šé«˜ã€‚ä¾‹å¦‚ï¼šæŸ¥è¯¢â€œç‹è€…è£è€€äº”å‘¨å¹´â€ï¼Œtermsï¼šâ€œç‹è€…â€ã€â€œè£è€€â€ã€â€œäº”å‘¨å¹´â€ï¼ŒåŒæ—¶åŒ…å«è¿™å‡ ä¸ª term çš„æ–‡æ¡£ coord å€¼è¶Šé«˜")]),s._v(" "),t("li",[s._v("tfï¼šè¯é¢‘")]),s._v(" "),t("li",[s._v("idfï¼šæ–‡æ¡£é€†é¢‘ç‡")]),s._v(" "),t("li",[s._v("boostï¼šboost ç¿»è¯‘è¿‡æ¥æ˜¯å¢é•¿æ¨åŠ¨çš„æ„æ€ï¼Œè¿™é‡Œå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæ”¯æŒå¯é…çš„åŠ æƒå‚æ•°ã€‚")]),s._v(" "),t("li",[s._v("normï¼šæ–‡æ¡£é•¿åº¦æ ‡å‡†åŒ–ï¼Œå†…å®¹è¶Šé•¿ï¼Œå€¼è¶Šå°")])])]),s._v(" "),t("li",[s._v("Lucene å·²ç»é’ˆå¯¹ TF/IDF åšäº†å°½å¯èƒ½çš„ä¼˜åŒ–ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ä»ç„¶æ— æ³•é¿å…ï¼š\n"),t("ul",[t("li",[s._v("è¯é¢‘é¥±å’Œåº¦é—®é¢˜ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒTF/IDF ç®—æ³•çš„ç›¸ä¼¼æ€§å¾—åˆ†ä¼šéšç€è¯é¢‘ä¸æ–­ä¸Šå‡ã€‚åœ¨ Lucene ç°æœ‰çš„ç®—æ³•ä¸­ï¼Œå¦‚æœä¸€ä¸ªè¯å‡ºç°çš„é¢‘ç‡è¿‡é«˜ï¼Œä¼šç›´æ¥å¿½ç•¥æ‰æ–‡æ¡£é•¿åº¦å¸¦æ¥çš„æƒé‡å½±å“ã€‚")]),s._v(" "),t("li",[s._v("å¦ä¸€æ¡æ›²çº¿æ˜¯ BM25 ç®—æ³•ç›¸ä¼¼æ€§å¾—åˆ†éšè¯é¢‘çš„å…³ç³»ï¼Œå®ƒçš„ç»“æœéšè¯é¢‘ä¸Šå‡è€Œè¶‹äºä¸€ä¸ªç¨³å®šå€¼ã€‚\n"),t("img",{attrs:{src:"BM25.jpg",alt:""}})])])])])]),s._v(" "),t("li",[s._v("BM25ï¼šé»˜è®¤\n"),t("ul",[t("li",[s._v("BM25 ä»‹ç»æ–‡ç« ï¼šhttps://en.wikipedia.org/wiki/Okapi_BM25 ï¼Œå¯¹ BM25 çš„å®ç°ç»†èŠ‚æˆ‘ä»¬åœ¨è¿™é‡Œä¸åšè¿‡å¤šé˜è¿°ï¼Œä¸»è¦äº†è§£ä¸€ä¸‹ BM25 ç®—æ³•ç›¸è¾ƒäºä¹‹å‰çš„ç®—æ³•æœ‰å“ªäº›ä¼˜ç‚¹ï¼š\n"),t("ul",[t("li",[s._v("è¯é¢‘é¥±å’Œä¸åŒäº TF/IDFï¼ŒBM25 çš„å®ç°åŸºäºä¸€ä¸ªé‡è¦å‘ç°ï¼šâ€œè¯é¢‘å’Œç›¸å…³æ€§ä¹‹é—´çš„å…³ç³»æ˜¯éçº¿æ€§çš„â€ã€‚å½“è¯é¢‘åˆ°è¾¾ä¸€å®šé˜ˆå€¼åï¼Œå¯¹ç›¸å…³æ€§å¾—åˆ†çš„å½±å“æ˜¯ç›¸åŒçš„ï¼Œæ­¤æ—¶åº”è¯¥ç”±å…¶ä»–å› ç´ çš„æƒé‡å†³å®šå¾—åˆ†é«˜ä½ï¼Œä¾‹å¦‚ä¹‹å‰æåˆ°çš„æ–‡æ¡£é•¿åº¦ã€‚")]),s._v(" "),t("li",[s._v("å°†æ–‡æ¡£é•¿åº¦åŠ å…¥ç®—æ³•ä¸­ç›¸åŒæ¡ä»¶ä¸‹ï¼ŒçŸ­ç¯‡æ–‡æ¡£çš„æƒé‡å€¼ä¼šé«˜äºé•¿ç¯‡æ–‡æ¡£ã€‚")]),s._v(" "),t("li",[s._v("æä¾›äº†å¯è°ƒæ•´çš„å‚æ•°")])])]),s._v(" "),t("li",[s._v('æˆ‘ä»¬åœ¨æŸ¥è¯¢è¿‡ç¨‹å¯ä»¥é€šè¿‡è®¾ç½® "explain":true æŸ¥çœ‹ç›¸ä¼¼æ€§å¾—åˆ†çš„å…·ä½“æƒ…å†µ')])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('GET /[your index]/_search\n{\n  "explain": true,\n  "query": {\n\t"match": {\n\t  "describe": "æµ‹è¯•"\n\t}\n  }\n}\n//ç®€åŒ–ç‰ˆæŸ¥è¯¢ç»“æœ\n{\n\t"_explanation": {\n\t\t"value": 0.21110919,\n\t\t"description": "weight(describe:æµ‹è¯• in 1) [PerFieldSimilarity], result of:",\n\t\t"details": [\n\t\t\t{\n\t\t\t\t"value": 0.21110919,\n\t\t\t\t"description": "score(freq=1.0), computed as boost * idf * tf from:",\n\t\t\t\t"details": [\n\t\t\t\t\t{\n\t\t\t\t\t\t"value": 2.2,\n\t\t\t\t\t\t"description": "boost",\n\t\t\t\t\t\t"details": []\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t"value": 0.18232156,\n\t\t\t\t\t\t"description": "idf, computed as log(1 + (N - n + 0.5) / (n + 0.5)) from:",\n\t\t\t\t\t\t"details": [...]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t"value": 0.5263158,\n\t\t\t\t\t\t"description": "tf, computed as freq / (freq + k1 * (1 - b + b * dl / avgdl)) from:",\n\t\t\t\t\t\t"details": [...]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t}\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br")])])]),s._v(" "),t("li",[s._v("boolean\n"),t("ul",[t("li",[s._v("boolean ç›¸ä¼¼æ€§éå¸¸å¥½ç†è§£ï¼Œåªèƒ½æ ¹æ®æŸ¥è¯¢æ¡ä»¶æ˜¯å¦åŒ¹é…ï¼Œå…¶æœ€ç»ˆå€¼å…¶å®å°±æ˜¯ query boost å€¼ã€‚")])])])])]),s._v(" "),t("li",[t("p",[s._v("query and filter context")]),s._v(" "),t("ul",[t("li",[s._v("filter Does this document match this query clause?ï¼ˆfilter åªå…³å¿ƒæ˜¯/å¦ï¼Œæ ¹æ®ä½ è¿‡æ»¤æ¡ä»¶ç»™ä½ ç­›é€‰å‡ºé»˜è®¤çš„æ–‡æ¡£ï¼‰")]),s._v(" "),t("li",[s._v("query how well does this document match this query clause?ï¼ˆquery çš„å…³æ³¨ç‚¹é™¤äº†æ˜¯å¦ä¹‹å¤–ï¼Œè¿˜å…³æ³¨è¿™äº›æ–‡æ¡£çš„åŒ¹é…åº¦æœ‰å¤šé«˜ï¼‰")]),s._v(" "),t("li",[s._v("ä»–ä»¬æœ¬è´¨ä¸Šçš„åŒºåˆ«æ˜¯æ˜¯å¦å‚ä¸ç›¸å…³æ€§å¾—åˆ†ã€‚åœ¨æŸ¥è¯¢è¿‡ç¨‹ä¸­ï¼Œå®˜æ–¹å»ºè®®å¯ä»¥æ ¹æ®å®é™…ä½¿ç”¨æƒ…å†µé…åˆä½¿ç”¨ filter å’Œ query ã€‚ä½†æ˜¯å¦‚æœä½ çš„æŸ¥è¯¢å¹¶ä¸å…³å¿ƒç›¸å…³æ€§å¾—åˆ†ï¼Œä»…å…³å¿ƒæŸ¥è¯¢åˆ°çš„ç»“æœï¼Œå…¶å®ä¸¤è€…å·®åˆ«ä¸å¤§ã€‚")]),s._v(" "),t("li",[s._v("é¢˜ä¸»æœ¬æ¥ä»¥ä¸ºä½¿ç”¨ filter å¯ä»¥èŠ‚çœè®¡ç®—ç›¸ä¼¼æ€§å¾—åˆ†çš„è€—æ—¶ï¼Œä½†æ˜¯ä½¿ç”¨ filter åŒæ ·ä¼šè¿›è¡Œç›¸ä¼¼æ€§å¾—åˆ†ï¼Œåªæ˜¯é€šè¿‡ç‰¹æ®Šçš„æ–¹å¼å°†å…¶ value ç½®ä¸ºäº† 0ã€‚")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('//only query\nGET /[your index]/_search\n{\n  "explain": true,\n  "query": {\n\t"bool": {\n\t  "must": [\n\t\t{"match": {"describe": "æµ‹è¯•"}},\n\t\t{"term": {"tab_id": 5}}\n\t  ]\n\t}\n  }\n}\n//ç®€åŒ–_explanationç»“æœ\n{\n\t"_explanation": {\n\t\t"value": 1.2111092,\n\t\t"description": "sum of:",\n\t\t"details": [\n\t\t\t{\n\t\t\t\t"value": 0.21110919,\n\t\t\t\t"description": "weight(describe:æµ‹è¯• in 1) [PerFieldSimilarity], result of:"\n\t\t\t},\n\t\t\t{\n\t\t\t\t"value": 1,\n\t\t\t\t"description": "tab_id:[5 TO 5]",\n\t\t\t\t"details": []\n\t\t\t}\n\t\t]\n\t}\n}\n\n//query+filter\nGET /[your index]/_search\n{\n  "explain": true,\n  "query": {\n\t"bool": {\n\t  "filter": [\n\t\t{"term": {"tab_id": "5"}}\n\t  ],\n\t  "must": [\n\t\t{"match": {"describe": "æµ‹è¯•"}}\n\t  ]\n\t}\n  }\n}\n//ç®€åŒ–_explanationç»“æœ\n{\n\t"_explanation": {\n\t\t"value": 0.21110919,\n\t\t"description": "sum of:",\n\t\t"details": [\n\t\t\t{\n\t\t\t\t"value": 0.21110919,\n\t\t\t\t"description": "weight(describe:æµ‹è¯• in 1) [PerFieldSimilarity], result of:"\n\t\t\t},\n\t\t\t{\n\t\t\t\t"value": 0,\n\t\t\t\t"description": "match on required clause, product of:",\n\t\t\t\t"details": [\n\t\t\t\t\t{\n\t\t\t\t\t\t"value": 0,\n\t\t\t\t\t\t"description": "# clause",\n\t\t\t\t\t\t"details": []\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t"value": 1,\n\t\t\t\t\t\t"description": "tab_id:[5 TO 5]",\n\t\t\t\t\t\t"details": []\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t]\n\t}\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br"),t("span",{staticClass:"line-number"},[s._v("73")]),t("br"),t("span",{staticClass:"line-number"},[s._v("74")]),t("br"),t("span",{staticClass:"line-number"},[s._v("75")]),t("br"),t("span",{staticClass:"line-number"},[s._v("76")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("æ’åº sort")]),s._v(" "),t("ul",[t("li",[s._v("åœ¨æ‰§è¡Œ ES æŸ¥è¯¢æ—¶ï¼Œé»˜è®¤çš„æ’åºè§„åˆ™æ˜¯æ ¹æ®ç›¸å…³æ€§å¾—åˆ†å€’æ’ï¼Œé’ˆå¯¹éå…¨æ–‡ç´¢å¼•å­—æ®µï¼Œå¯ä»¥æŒ‡å®šæ’åºæ–¹å¼ï¼Œä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ã€‚")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('//æŸ¥è¯¢æ—¶å…ˆæ ¹æ®tab_idé™åºæ’åˆ—ï¼Œè‹¥tab_idç›¸åŒï¼Œåˆ™æ ¹ç©¶statuså‡åºæ’åˆ—\nGET /[your index]/_search\n{\n  "sort": [\n    {"tab_id": {"order": "desc"}},\n    {"status": {"order": "asc"}}\n  ]\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("ul",[t("li",[s._v("é’ˆå¯¹ç¼ºå¤±æ•°å€¼ç±»å­—æ®µçš„é»˜è®¤å€¼å¹¶ä¸æ˜¯ 0ï¼ŒES é»˜è®¤ä¼šä¿è¯æ’åºå­—æ®µæ²¡æœ‰ value çš„æ–‡æ¡£è¢«æ”¾åœ¨æœ€åï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼š\n"),t("ul",[t("li",[s._v("é™åºæ’åˆ—ï¼Œç¼ºå¤±å­—æ®µé»˜è®¤å€¼ä¸ºè¯¥å­—æ®µç±»å‹çš„æœ€å°å€¼")]),s._v(" "),t("li",[s._v("å‡åºæ’åˆ—ï¼Œç¼ºå¤±å­—æ®µé»˜è®¤å€¼ä¸ºè¯¥å­—æ®µç±»å‹çš„æœ€å¤§å€¼")])])]),s._v(" "),t("li",[s._v("å¥½æ¶ˆæ¯æ˜¯ï¼ŒES ä¸ºæˆ‘ä»¬æä¾›äº† missing å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šç¼ºå¤±å€¼å¡«å……ï¼Œä½†æ˜¯å®ƒå¤ªéšè”½äº† ğŸ˜­ï¼Œå…¶é»˜è®¤å€¼ä¸º _last ã€‚")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('GET /[your index]/_search\n{\n  "sort": [\n    {"num": {"order": "asc"}}\n  ]\n}\n//ç®€åŒ–ç»“æœ\n{\n    "hits": [\n      {"sort": [1]},\n        {"sort": [9223372036854775807]},\n        {"sort": [9223372036854775807]}\n    ]\n}\n\nGET /your_index/_search\n{\n  "sort": [\n    {"num": {"order": "desc"}}\n  ]\n}\n\n//ç®€åŒ–ç»“æœ\n{\n    "hits": [\n        {"sort": [1]},\n        {"sort": [-9223372036854775808]},\n        {"sort": [-9223372036854775808]}\n    ]\n}\n\n// with missing\nGET /[your index]/_search\n{\n  "sort": [\n    {\n      "num": {\n        "order": "asc",\n        "missing": "0"\n      }\n    }\n  ]\n}\n\n//ç®€åŒ–ç»“æœ\n{\n    "hits": [\n        {"sort": [0]},\n        {"sort": [0]},\n        {"sort": [1]}\n    ]\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br")])]),t("ul",[t("li",[s._v("ä½¿ç”¨æŠ€å·§ï¼šç”¨ function score å®ç°è‡ªå®šä¹‰æ’åº\n"),t("ul",[t("li",[s._v("ä¸çŸ¥é“å¤§å®¶æ˜¯å¦é‡åˆ°è¿‡ç±»ä¼¼çš„åœºæ™¯ï¼šæœŸæœ›æŸ¥è¯¢ç»“æœæŒ‰ç…§æŸä¸ªç±»å‹è¿›è¡Œæ’åºï¼Œæˆ–è€…æŸ¥è¯¢ç»“æœé¡ºåºç”±å¤šä¸ªå­—æ®µçš„æƒé‡ç»„åˆå†³å®šã€‚")]),s._v(" "),t("li",[s._v("å…·ä½“è§£å†³æ–¹æ¡ˆéœ€è¦æ ¹æ®ä¸šåŠ¡å…·ä½“æƒ…å†µè€Œå®šï¼Œè¿™é‡Œç»™å‡ºä¸€ç§åŸºäº ES æŸ¥è¯¢çš„è§£å†³æ–¹æ¡ˆã€‚ES ä¸ºæˆ‘ä»¬æä¾›äº† function score ï¼Œæ”¯æŒè‡ªå®šä¹‰ç›¸å…³æ€§å¾—åˆ† score çš„ç”Ÿæˆæ–¹å¼ï¼Œéƒ¨åˆ†å‚æ•°ä»‹ç»ï¼š\n"),t("ul",[t("li",[s._v("weightï¼šæƒé‡å€¼")]),s._v(" "),t("li",[s._v("boostï¼šåŠ æƒå€¼")]),s._v(" "),t("li",[s._v("boost_modeï¼šåŠ æƒå€¼è®¡ç®—æ–¹å¼ï¼ˆé»˜è®¤ä¸º multipleï¼‰")]),s._v(" "),t("li",[s._v("score_modeï¼šå¾—åˆ†è®¡ç®—æ–¹å¼ï¼ˆé»˜è®¤ä¸º multipleï¼‰")])])]),s._v(" "),t("li",[s._v("ä¸¾ç‚¹å®é™…çš„æ —å­ï¼Œå‡è®¾å’±ä»¬æœ‰ä¸€ä¸ªå­˜æ”¾æ°´æœçš„ Indexï¼š\n"),t("ul",[t("li",[s._v("ç®€å•ä¸€ç‚¹çš„ caseï¼šæŸ¥è¯¢ç»“æœæ ¹æ®æ°´æœç±»å‹è‹¹æœï¼Œæ¢¨ä¼˜å…ˆ è‹¹æœçš„ä¼˜å…ˆçº§é«˜äºæ¢¨çš„ä¼˜å…ˆçº§ï¼Œæ¢¨çš„ä¼˜å…ˆçº§é«˜äºå…¶ä»–æ°´æœçš„ä¼˜å…ˆçº§ã€‚æˆ‘ä»¬å¯ä»¥å®šä¹‰æ¢¨çš„æƒé‡ä¸º 1ï¼Œè‹¹æœçš„æƒé‡ä¸º 2"),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('GET /fruit_test/_search\n{\n  "explain": true,\n  "query": {\n\t"function_score": {\n\t  "functions": [\n\t\t{\n\t\t  "filter": {"term": {"type": "pear"}},\n\t\t  "weight": 1\n\t\t},\n\t\t{\n\t\t  "filter": {"term": {"type": "apple"}},\n\t\t  "weight": 2\n\t\t}\n\t  ],\n\t  "boost": 1,\n\t  "score_mode": "sum"\n\t}\n  }\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])])]),s._v(" "),t("li",[s._v("å¤æ‚ä¸€ç‚¹çš„ caseï¼ˆåˆ«é—®æˆ‘æ˜¯æ€ä¹ˆæƒ³åˆ°çš„ï¼‰ï¼š\n"),t("ul",[t("li",[s._v("ä¼˜å…ˆçº§ä¸€ï¼šæ ¹æ®æ°´æœæ˜¯å¦æœ‰è´§æ’åºï¼Œæœ‰è´§çš„æ’å‰é¢ï¼Œæ— è´§çš„è¿‡æ»¤æ‰")]),s._v(" "),t("li",[s._v("ä¼˜å…ˆçº§äºŒï¼šæ ¹æ®æ°´æœæ˜¯å¦é¢„å”®æ’åºï¼Œéé¢„å”®ä¼˜å…ˆå±•ç¤º")]),s._v(" "),t("li",[s._v("ä¼˜å…ˆçº§ä¸‰ï¼šæ ¹æ®æ°´æœç±»å‹è‹¹æœï¼Œæ¢¨ä¼˜å…ˆå±•ç¤º")]),s._v(" "),t("li",[s._v("ä¼˜å…ˆçº§å››ï¼šæ ¹æ®æ°´æœé¢œè‰²çº¢è‰²ï¼Œç»¿è‰²ä¼˜å…ˆå±•ç¤º")]),s._v(" "),t("li",[s._v("ä¼˜å…ˆçº§äº”ï¼šæ ¹æ®ä»·æ ¼å‡åºæ’åº æˆ‘ä»¬æ ¹æ®ä¼˜å…ˆçº§é¡ºåºå®šä¹‰æ¯ä¸ªæ¡ä»¶çš„æƒé‡ï¼ŒæŒ‡å®šè‡ªå®šä¹‰ç›¸å…³æ€§å¾—åˆ†è§„åˆ™åï¼Œåœ¨ sort ä¸­æŒ‡å®šå…ˆæ ¹æ® _score é™åºæ’åˆ—ï¼Œå†æ ¹æ®ä»·æ ¼å‡åºæ’åˆ—ã€‚")]),s._v(" "),t("li",[s._v("ä¼˜å…ˆçº§å››ï¼šç»¿è‰²æƒé‡ 1 ã€çº¢è‰²æƒé‡ 2")]),s._v(" "),t("li",[s._v("ä¼˜å…ˆçº§ä¸‰ï¼šæ¢¨æƒé‡ 3 ã€è‹¹æœæƒé‡ 4")]),s._v(" "),t("li",[s._v("ä¼˜å…ˆçº§äºŒï¼šé¢„å”®æƒé‡ 7ï¼ˆä¼˜å…ˆçº§å›› max + ä¼˜å…ˆçº§ä¸‰ max = 6ï¼Œä¼˜å…ˆçº§äºŒçš„æƒé‡å¿…é¡»å¤§äºè¿™ä¸ªå€¼ï¼‰")]),s._v(" "),t("li",[s._v("ä¼˜å…ˆçº§ä¸€ï¼šç›´æ¥å°†æ— è´§æ°´æœè¿‡æ»¤")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('GET /fruit_test/_search\n{\n  "query": {\n\t"function_score": {\n\t  "query": {"range": {"stock": {"gt": 0}}\n\t  },\n\t  "functions": [\n\t\t{\n\t\t  "filter": {"term": {"color": "green"}},\n\t\t  "weight": 1\n\t\t},\n\t\t{\n\t\t  "filter": {"term": {"color": "red"}},\n\t\t  "weight": 2\n\t\t},\n\t\t{\n\t\t  "filter": {"term": {"type": "pear"}},\n\t\t  "weight": 3\n\t\t},\n\t\t{\n\t\t  "filter": {"term": {"type": "apple"}},\n\t\t  "weight": 4\n\t\t},\n\t\t{\n\t\t  "filter": {"term": {"pre_sale": false}},\n\t\t  "weight": 7\n\t\t}\n\t  ],\n\t  "boost": 1,\n\t  "boost_mode": "sum",\n\t  "score_mode": "sum"\n\t}\n  },\n  "sort": [\n\t{"_score": {"order": "desc"}},\n\t{"price_per_kg": {"order": "asc"}\n\t}\n  ]\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br")])])])])])])])])]),s._v(" "),t("li",[t("p",[s._v("èšåˆ aggs")]),s._v(" "),t("ul",[t("li",[s._v("èšåˆæ“ä½œå¯ä»¥å¸®åŠ©æˆ‘ä»¬å°†æŸ¥è¯¢æ•°æ®æŒ‰ç…§æŒ‡å®šçš„æ–¹å¼è¿›è¡Œå½’ç±»ã€‚å¸¸è§çš„èšåˆæ–¹å¼ï¼Œè¯¸å¦‚ï¼šmaxã€minã€avgã€rangeã€æ ¹æ® term èšåˆç­‰ç­‰ï¼Œè¿™äº›éƒ½æ¯”è¾ƒå¥½ç†è§£ï¼ŒåŠŸèƒ½ä½¿ç”¨ä¸Šä¹Ÿæ²¡æœ‰å¤ªå¤šç–‘æƒ‘ï¼Œä¸‹é¢ä¸»è¦ä»‹ç»é¢˜ä¸»åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°çš„å‘ç‚¹ä»¥åŠæŒ‡æ ‡èšåˆåµŒå¥—æŸ¥è¯¢ã€‚")]),s._v(" "),t("li",[s._v("ES è¿˜æ”¯æŒpipline aggsï¼Œä¸»è¦é’ˆå¯¹çš„å¯¹è±¡ä¸æ˜¯æ–‡æ¡£é›†ï¼Œè€Œæ˜¯å…¶ä»–èšåˆçš„ç»“æœï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªè¡Œäº†è§£ã€‚")]),s._v(" "),t("li",[s._v("ES é»˜è®¤çš„æ—¶é—´æ ¼å¼ä¸ºæ¯«ç§’çº§æ—¶é—´\n"),t("ul",[t("li",[s._v("å¦‚æœä½ æœ‰è¯‰æ±‚ï¼Œéœ€è¦é’ˆå¯¹ç§’çº§æ—¶é—´æˆ³è¿›è¡Œæ—¶é—´èšåˆï¼Œä¾‹å¦‚ï¼šæŸé”€å”®åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬æœŸæœ›æŒ‰å°æ—¶/å¤©/æœˆ/è¿›è¡Œé”€å”®å•æ•°ç»Ÿè®¡ã€‚")]),s._v(" "),t("li",[s._v("é‚£ä¹ˆæœ‰ä»¥ä¸‹ä¸¤ç§å¸¸è§é”™è¯¯ä½¿ç”¨æ–¹å¼éœ€è¦è§„é¿ï¼š\n"),t("ul",[t("li",[s._v("å¦‚æœåœ¨åˆ›å»º date ç±»å‹å­—æ®µï¼Œä½†æ˜¯æ²¡æœ‰æŒ‡å®šæ—¶é—´ format æ ¼å¼ï¼Œå¹¶ä¸”ä»¥ç§’çº§æ—¶é—´æˆ³èµ‹å€¼ï¼ˆç›´æ¥ä»¥å¹´æœˆæ—¥èµ‹å€¼æ²¡æœ‰é—®é¢˜ï¼‰ æ ¹æ®æ—¶é—´èšåˆå°†æ— æ³•è§£æå‡ºæ­£ç¡®çš„æ•°æ®ï¼Œæ—¶é—´ä¼šè¢«è§£æä¸º 1970 å¹´")]),s._v(" "),t("li",[s._v("å¦‚æœç›´æ¥ä½¿ç”¨ numberic ç±»å‹ï¼Œä¾‹å¦‚ integer å­˜å‚¨æ—¶é—´æˆ³ ä¸ç®¡æ˜¯ç§’çº§è¿˜æ˜¯æ¯«ç§’çº§ï¼Œéƒ½æ— æ³•è¢«æ­£ç¡®è¯†åˆ«")])])]),s._v(" "),t("li",[s._v("æ­£ç¡®çš„åšæ³•ï¼šåˆ›å»º mappingï¼Œæ˜ç¡®æŒ‡å®šæ—¶é—´çš„æ ¼å¼ä¸ºç§’çº§æ—¶é—´æˆ³ã€‚")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('PUT /date_test/_mapping\n{\n  "properties":{\n\t"create_time":{\n\t  "type":"date",\n\t  "format" : "epoch_second"\n\t}\n  }\n}\n\n//ä»¥å¹´ä¸ºæ—¶é—´é—´éš” è¿›è¡Œç»Ÿè®¡\nGET /date_test/_search\n{\n  "size": 0,\n  "aggs": {\n\t"test": {\n\t  "date_histogram": {\n\t\t"field": "create_time",\n\t\t"format": "yyyy",\n\t\t"interval": "year"\n\t  }\n\t}\n  }\n}\n//ä»æŸ¥è¯¢ç»“æœå¯ä»¥çœ‹å‡ºæ¥ï¼Œå®é™…è®¡ç®—æ—¶ESä¼šå¸®æˆ‘ä»¬æŠŠç§’çº§æ—¶é—´æˆ³è½¬æˆæ¯«ç§’çº§æ—¶é—´æˆ³\n{\n"aggregations" : {\n\t"test" : {\n\t  "buckets" : [\n\t\t{\n\t\t  "key_as_string" : "2018",\n\t\t  "key" : 1514764800000,\n\t\t  "doc_count" : 2\n\t\t},\n\t\t{\n\t\t  "key_as_string" : "2019",\n\t\t  "key" : 1546300800000,\n\t\t  "doc_count" : 0\n\t\t},\n\t\t{\n\t\t  "key_as_string" : "2020",\n\t\t  "key" : 1577836800000,\n\t\t  "doc_count" : 3\n\t\t}\n\t  ]\n\t}\n  }\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br")])])]),s._v(" "),t("li",[s._v("èšåˆåµŒå¥—æŸ¥è¯¢\n"),t("ul",[t("li",[s._v("ä¸Šé¢ä»‹ç»äº†æ ¹æ®æ—¶é—´èšåˆï¼Œè¿˜æ˜¯ä»¥åˆšåˆšçš„ä¾‹å­æ¥è¯´ï¼ŒæŸé”€å”®åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬æœŸæœ›åœ¨æ ¹æ®æ—¶é—´ç»Ÿè®¡é”€å”®å•æ•°çš„åŒæ—¶ï¼Œç»Ÿè®¡å‡ºæ—¶é—´åŒºé—´å†…çš„é”€å”®æ€»é‡‘é¢ã€‚")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('GET /date_test/_search\n{\n  "size": 0,\n  "aggs": {\n\t"test": {\n\t  "date_histogram": {\n\t\t"field": "create_time",\n\t\t"format": "yyyy",\n\t\t"interval": "year"\n\t  },\n\t  "aggs": {\n\t\t"sum_profit": {\n\t\t  "sum": {\n\t\t\t"field": "profit"\n\t\t  }\n\t\t}\n\t  }\n\t}\n  }\n}\n\n{\n"aggregations" : {\n\t"test" : {\n\t  "buckets" : [\n\t\t{\n\t\t  "key_as_string" : "2018",\n\t\t  "key" : 1514764800000,\n\t\t  "doc_count" : 2,\n\t\t  "sum_profit" : {\n\t\t\t"value" : 200.0\n\t\t  }\n\t\t},\n\t\t{\n\t\t  "key_as_string" : "2019",\n\t\t  "key" : 1546300800000,\n\t\t  "doc_count" : 0,\n\t\t  "sum_profit" : {\n\t\t\t"value" : 0.0\n\t\t  }\n\t\t},\n\t\t{\n\t\t  "key_as_string" : "2020",\n\t\t  "key" : 1577836800000,\n\t\t  "doc_count" : 3,\n\t\t  "sum_profit" : {\n\t\t\t"value" : 3000.0\n\t\t  }\n\t\t}\n\t  ]\n\t}\n  }\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br")])])]),s._v(" "),t("li",[s._v("ä½¿ç”¨æŠ€å·§ï¼šè‡ªå®ç° distinct\n"),t("ul",[t("li",[s._v("ES é»˜è®¤å¹¶ä¸æ”¯æŒ distinctï¼Œå¯ä»¥å°è¯•ä½¿ç”¨ terms èšåˆï¼Œè§£æç»“æœä¸­çš„ key")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('{\n"aggregations" : {\n\t"test" : {\n\t  "doc_count_error_upper_bound" : 0,\n\t  "sum_other_doc_count" : 0,\n\t  "buckets" : [\n\t\t{"key" : "1","doc_count" : 2},\n\t\t{"key" : "10","doc_count" : 2},\n\t\t{"key" : "16","doc_count" : 2}\n\t  ]\n\t}\n  }\n}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])])])])]),s._v(" "),t("li",[t("p",[s._v("ç´¢å¼•åˆ«åã€ç´¢å¼•ç”Ÿå‘½å‘¨æœŸç­–ç•¥ã€ç´¢å¼•æ¨¡ç‰ˆ")]),s._v(" "),t("ul",[t("li",[s._v("Aliases ç´¢å¼•åˆ«å ç´¢å¼•åˆ«åï¼Œé¡¾åæ€ä¹‰ï¼Œå®šä¹‰äº†åˆ«åä¹‹åï¼Œå¯ä»¥é€šè¿‡åˆ«åå¯¹ index è¿›è¡ŒæŸ¥è¯¢PUT /[your index]/_alias/[your alias name]")]),s._v(" "),t("li",[s._v("Index Lifecycle Policies ç´¢å¼•ç”Ÿå‘½å‘¨æœŸç­–ç•¥ ç´¢å¼•ç”Ÿå‘½å‘¨æœŸç­–ç•¥æ”¯æŒæˆ‘ä»¬æ ¹æ®å¤©ã€å­˜å‚¨é‡çº§ç­‰ä¿¡æ¯å»è‡ªåŠ¨ç®¡ç†æˆ‘ä»¬çš„ç´¢å¼•ã€‚åˆ›å»ºæ–¹å¼å¯ä»¥é€šè¿‡ RESTful APIï¼Œä¹Ÿå¯ä»¥ç›´æ¥åœ¨ kibana ä¸Šåˆ›å»ºï¼Œé¢˜ä¸»ä½¿ç”¨çš„æ˜¯åè€…ï¼Œå¯è§†åŒ–ç•Œé¢çœ‹èµ·æ¥æ¯”è¾ƒæ¸…æ™°ï½ æ”¯æŒé…ç½®æ»¡è¶³ä¸€å®šè§„åˆ™åç´¢å¼•è‡ªåŠ¨å˜åŒ–ï¼š\n"),t("ul",[t("li",[s._v("è‡ªåŠ¨æ»šåŠ¨ç´¢å¼•ï¼ˆhotï¼‰")]),s._v(" "),t("li",[s._v("ä¿ç•™ç´¢å¼•ä»…ä¾›æ£€ç´¢ï¼ˆwarmï¼‰")]),s._v(" "),t("li",[s._v("ä¿ç•™ç´¢å¼•ä»…ä¾›æ£€ç´¢åŒæ—¶å‡å°‘ç£ç›˜å­˜å‚¨ï¼ˆcoldï¼‰")]),s._v(" "),t("li",[s._v("åˆ é™¤ç´¢å¼•")])])]),s._v(" "),t("li",[s._v("Template ç´¢å¼•æ¨¡æ¿ é€šè¿‡ index_patterns å‚æ•°è®¾ç½®ç´¢å¼•åæ­£åˆ™åŒ¹é…è§„åˆ™ï¼Œå‘ä¸€ä¸ªä¸å­˜åœ¨çš„ç´¢å¼• POST æ•°æ®ï¼Œå‘½ä¸­ç´¢å¼•åè§„åˆ™åå³ä¼šæ ¹æ®ç´¢å¼•æ¨¡ç‰ˆåˆ›å»ºç´¢å¼•ï¼Œä¸ä¼šè¿›è¡ŒåŠ¨æ€æ˜ å°„ã€‚")])])])]),s._v(" "),t("h2",{attrs:{id:"å‚è€ƒ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒ"}},[s._v("#")]),s._v(" å‚è€ƒ")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://mp.weixin.qq.com/s/GG_zrQlaiP2nfPOxzx_j9w",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://mp.weixin.qq.com/s/GG_zrQlaiP2nfPOxzx_j9w"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);n.default=e.exports}}]);