(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{604:function(e,s,n){"use strict";n.r(s);var a=n(35),t=Object(a.a)({},(function(){var e=this,s=e.$createElement,n=e._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#å®‰è£…ç¯å¢ƒ"}},[e._v("å®‰è£…ç¯å¢ƒ")])])])]),n("p"),e._v(" "),n("h2",{attrs:{id:"å®‰è£…ç¯å¢ƒ"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#å®‰è£…ç¯å¢ƒ"}},[e._v("#")]),e._v(" å®‰è£…ç¯å¢ƒ")]),e._v(" "),n("p",[e._v("ä»¥Linuxå¹³å°ä¸ºä¾‹ï¼Œå·²å®‰è£…dockerï¼Œå¹¶å¯åŠ¨")]),e._v(" "),n("ol",[n("li",[e._v("minikubeä¸‹è½½å®‰è£…"),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("$ curl -LO https://github.com/kubernetes/minikube/releases/download/v1.13.1/minikube-linux-amd64\nå¾ˆæ…¢å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼\ncurl -LO https://githubfast.com/kubernetes/minikube/releases/download/v1.13.1/minikube-linux-amd64\n$ sudo install minikube-linux-amd64 /usr/local/bin/minikube\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br")])])]),e._v(" "),n("li",[e._v("kubectlä¸‹è½½å®‰è£…\n"),n("ul",[n("li",[e._v("æ–¹å¼ä¸€")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("- [https://kubernetes.io/releases/download/](https://kubernetes.io/releases/download/)\n- [https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/](https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/)\n$ curl -LO https://dl.k8s.io/v1.19.2/kubernetes-client-linux-amd64.tar.gz\n$ tar -xvf kubernetes-client-linux-amd64.tar.gz\n$ sudo install kubernetes/client/bin/kubectl /usr/local/bin/kubectl\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])]),n("ul",[n("li",[e._v("æ–¹å¼äºŒ")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('ubuntu@VM-12-15-ubuntu:~/k8s$ curl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\n100   138  100   138    0     0    115      0  0:00:01  0:00:01 --:--:--   115\n100 45.7M  100 45.7M    0     0  4463k      0  0:00:10  0:00:10 --:--:-- 5760k\n\nubuntu@VM-12-15-ubuntu:~/k8s$ curl -LO "https://dl.k8s.io/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl.sha256"\n  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n100   138  100   138    0     0     36      0  0:00:03  0:00:03 --:--:--    36\n100    64  100    64    0     0     10      0  0:00:06  0:00:05  0:00:01    36\n\nubuntu@VM-12-15-ubuntu:~/k8s$ echo "$(cat kubectl.sha256)  kubectl" | sha256sum --check\nkubectl: OK\n\nubuntu@VM-12-15-ubuntu:~/k8s$ sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl\n\nubuntu@VM-12-15-ubuntu:~/k8s$ kubectl version --client\nWARNING: This version information is deprecated and will be replaced with the output from kubectl version --short.  Use --output=yaml|json to get the full version.\nClient Version: version.Info{Major:"1", Minor:"26", GitVersion:"v1.26.0", GitCommit:"b46a3f887ca979b1a5d14fd39cb1af43e7e5d12d", GitTreeState:"clean", BuildDate:"2022-12-08T19:58:30Z", GoVersion:"go1.19.4", Compiler:"gc", Platform:"linux/amd64"}\nKustomize Version: v4.5.7\n\nubuntu@VM-12-15-ubuntu:~/k8s$ kubectl version --client --output=yaml\nclientVersion:\n  buildDate: "2022-12-08T19:58:30Z"\n  compiler: gc\n  gitCommit: b46a3f887ca979b1a5d14fd39cb1af43e7e5d12d\n  gitTreeState: clean\n  gitVersion: v1.26.0\n  goVersion: go1.19.4\n  major: "1"\n  minor: "26"\n  platform: linux/amd64\nkustomizeVersion: v4.5.7\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br"),n("span",{staticClass:"line-number"},[e._v("23")]),n("br"),n("span",{staticClass:"line-number"},[e._v("24")]),n("br"),n("span",{staticClass:"line-number"},[e._v("25")]),n("br"),n("span",{staticClass:"line-number"},[e._v("26")]),n("br"),n("span",{staticClass:"line-number"},[e._v("27")]),n("br"),n("span",{staticClass:"line-number"},[e._v("28")]),n("br"),n("span",{staticClass:"line-number"},[e._v("29")]),n("br"),n("span",{staticClass:"line-number"},[e._v("30")]),n("br"),n("span",{staticClass:"line-number"},[e._v("31")]),n("br"),n("span",{staticClass:"line-number"},[e._v("32")]),n("br"),n("span",{staticClass:"line-number"},[e._v("33")]),n("br"),n("span",{staticClass:"line-number"},[e._v("34")]),n("br"),n("span",{staticClass:"line-number"},[e._v("35")]),n("br")])])])]),e._v(" "),n("p",[e._v("kubectl port-forward è½¬å‘ç«¯å£\nport: æ˜¯k8sé›†ç¾¤å†…éƒ¨è®¿é—®serviceçš„ç«¯å£ï¼Œå³é€šè¿‡clusterIP: portå¯ä»¥è®¿é—®åˆ°æŸä¸ªservice\nnodePort: æ˜¯å¤–éƒ¨è®¿é—®k8sé›†ç¾¤ä¸­serviceçš„ç«¯å£ï¼Œé€šè¿‡nodeIP: nodePortå¯ä»¥ä»å¤–éƒ¨è®¿é—®åˆ°æŸä¸ªservice\ntargetPort: æ˜¯podçš„ç«¯å£ï¼Œä»portå’ŒnodePortæ¥çš„æµé‡ç»è¿‡kube-proxyæµå…¥åˆ°åç«¯podçš„targetPortä¸Šï¼Œæœ€åè¿›å…¥å®¹å™¨\ncontainerPort: æ˜¯podå†…éƒ¨å®¹å™¨çš„ç«¯å£ï¼ŒtargetPortæ˜ å°„åˆ°containerPort")]),e._v(" "),n("p",[e._v("useradd --r -m -s /bin/bash minikube\npasswd minikube\nadduser minikube sudo#ç»™ç”¨æˆ·æ·»åŠ ç®¡ç†å‘˜æƒé™\ngroupadd docker\nusermod -aG docker minikube\nnewgrp docker")]),e._v(" "),n("p",[e._v("apt install apt-transport-https\ncurl https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg | apt-key add -\n#è®¾ç½®æº\ncat <"),n("EOF",[e._v("/etc/apt/sources.list.d/kubernetes.list\ndeb https://mirrors.aliyun.com/kubernetes/apt/  kubernetes-xenial main\nEOF\n#ä¸‹è½½k8séœ€è¦çš„å·¥å…·\napt install kubelet kubeadm kubectl")])],1),e._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[e._v("Kubernetesé›†ç¾¤å®‰è£…"),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("sudo minikube start --driver=docker --container-runtime=containerd --image-repository='registry.cn-hangzhou.aliyuncs.com/google_containers'  --force\nminikube start --driver=vmware --memory=2048 --cpus=2 --image-repository='registry.cn-hangzhou.aliyuncs.com/google_containers'\n\nroot@knownsec-virtual-machine:/home/knownsec/k8s# minikube start\nğŸ˜„  minikube v1.13.1 on Ubuntu 20.04\nâœ¨  Automatically selected the docker driver\nğŸ›‘  The \"docker\" driver should not be used with root privileges.\nğŸ’¡  If you are running minikube within a VM, consider using --driver=none:\nğŸ“˜    https://minikube.sigs.k8s.io/docs/reference/drivers/none/\n\nâŒ  Exiting due to DRV_AS_ROOT: The \"docker\" driver should not be used with root privileges.\n\nroot@knownsec-virtual-machine:/home/knownsec/k8s# minikube start --force --driver=docker\n\næ…¢æ…¢ç­‰ï¼Œæ—¶é—´ç¨å¾®æœ‰ç‚¹ä¹…ï½ï½\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br")])])]),e._v(" "),n("li",[e._v("æ£€æŸ¥é›†ç¾¤çŠ¶æ€"),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("root@knownsec-virtual-machine:/home/knownsec/k8s# kubectl cluster-info\nKubernetes master is running at https://172.17.0.4:8443\nKubeDNS is running at https://172.17.0.4:8443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy\n\nTo further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])])]),e._v(" "),n("li",[e._v("åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨\nåˆ›å»ºæ–‡ä»¶vim deployment.yamlï¼Œå‘å¸ƒéƒ¨ç½²æ–‡ä»¶åˆ° Kubernetes é›†ç¾¤ï¼Œæ ¼å¼å‚è€ƒï¼š"),n("a",{attrs:{href:"https://kubernetes.io/docs/concepts/workloads/controllers/deployment/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://kubernetes.io/docs/concepts/workloads/controllers/deployment/"),n("OutboundLink")],1)])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("kubectl create -f deployment.yaml --validate=false\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("æŸ¥çœ‹ä¸€ä¸‹Podæ˜¯å¦è¢«æˆåŠŸå¯åŠ¨")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("thinker@Thinker .k8s % kubectl get pod -o wide\nNAME                               READY   STATUS             RESTARTS   AGE     IP           NODE       NOMINATED NODE   READINESS GATES\nnginx-deployment-9456bbbf9-657fd   0/1     ImagePullBackOff   0          2m39s   172.17.0.5   minikube   <none>           <none>\nnginx-deployment-9456bbbf9-bblxg   0/1     ImagePullBackOff   0          2m39s   172.17.0.6   minikube   <none>           <none>\nnginx-deployment-9456bbbf9-fgw9k   0/1     ImagePullBackOff   0          2m39s   172.17.0.7   minikube   <none>           <none>\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])]),n("p",[e._v("åˆ›å»º service.yaml æ–‡ä»¶ï¼Œå°†æœåŠ¡æš´éœ²å‡ºå»")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("kubectl create -f service.yaml --validate=false\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("åˆ›å»ºå®Œæˆåï¼ŒKubernetes ä¼šéšæœºå¸®åŠ©æˆ‘ä»¬åˆ†é…ä¸€ä¸ªå¤–éƒ¨è®¿é—®ç«¯å£")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("kubectl get service -o wide\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("ç”±äºæˆ‘ä»¬çš„é›†ç¾¤ä½¿ç”¨ minikube å®‰è£…ï¼Œè¦æƒ³é›†ç¾¤ä¸­çš„æœåŠ¡å¯ä»¥é€šè¿‡å¤–éƒ¨è®¿é—®ï¼Œè¿˜éœ€è¦æ‰§è¡Œä»¥ä¸‹å‘½ä»¤")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("minikube service hello-world\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("ul",[n("li",[e._v("jenkins k8s")])]),e._v(" "),n("ol",[n("li",[e._v("dockeræ›´æ¢é˜¿é‡Œé•œåƒæº")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors\n\né…ç½®é•œåƒåŠ é€Ÿå™¨\næ‚¨å¯ä»¥é€šè¿‡ä¿®æ”¹daemoné…ç½®æ–‡ä»¶/etc/docker/daemon.jsonæ¥ä½¿ç”¨åŠ é€Ÿå™¨\nsudo mkdir -p /etc/docker\nsudo tee /etc/docker/daemon.json\n{\n  "registry-mirrors": ["https://yf2c7vcr.mirror.aliyuncs.com"]\n}\n\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br")])]),n("ol",{attrs:{start:"2"}},[n("li",[e._v("éƒ¨ç½²Jenkinsç¯å¢ƒ")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("docker search jenkins\ndocker pull jenkins/jenkins\nubuntu@VM-12-15-ubuntu:/home$ sudo mkdir jenkins\nubuntu@VM-12-15-ubuntu:/home$ sudo chmod 777 jenkins/\ndocker run -d -uroot -p 8088:8080 -p 50000:50000 --name jenkins -v /home/jenkins:/var/jenkins_home -v /etc/localtime:/etc/localtime  jenkins/jenkins\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])]),n("p",[e._v("å› ç½‘ç»œåŸå› ï¼Œjenkinsæ’ä»¶ä¸‹è½½æ…¢ï¼Œå¯è¿›å…¥å®¿ä¸»æœºç›®å½• /home/jenkins_home/ï¼Œç¼–è¾‘æ–‡ä»¶ hudson.model.UpdateCenter.xml")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("sudo chmod 777 hudson.model.UpdateCenter.xml \nå°† url å†…å®¹ä¿®æ”¹ä¸º https://mirrors.tuna.tsinghua.edu.cn/jenkins/updates/update-center.jsonï¼ˆæ¸…åå¤§å­¦å®˜æ–¹é•œåƒï¼‰\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br")])]),n("p",[e._v("æˆ–è€…æ¢é˜¿é‡Œæº")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("https://developer.aliyun.com/mirror/?serviceType=&tag=&keyword=jenkins\nè¿›å…¥updates/ç›®å½•\næŸ¥çœ‹update-center.json\nå¤åˆ¶æ‰“å¼€é¡µé¢é“¾æ¥https://mirrors.aliyun.com/jenkins/updates/update-center.json?spm=a2c6h.25603864.0.0.2397597ayN97Ig\nåé¢å‚æ•°å»æ‰ï¼Œç•™ä¸‹https://mirrors.aliyun.com/jenkins/updates/update-center.json\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])]),n("p",[e._v("é‡å¯Jenkins")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("docker restart jenkins\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("è¾“å…¥å¯†ç è¿›å…¥jerkinsé¡µé¢")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("docker logs 45f6ffc17df2f5655d02db3da28e69d271ade984628cdb97691b9dd9de8c6663\n5c482721bc1048ce8cc6918af566a4e8\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br")])]),n("p",[e._v("http://175.178.125.91:8088/\nè¾“å…¥åˆå§‹çš„ç®¡ç†å‘˜å¯†ç ï¼Œæ ¹æ®æç¤ºå¯†ç åœ¨/var/jenkins_home/secrets/initialAdminPasswordè¿™ä¸ªæ–‡ä»¶ä¸­\nå¯æ‰§è¡Œ docker exec jenkins cat /var/jenkins_home/secrets/initialAdminPasswordè·å–\nå®‰è£…æ¨èçš„æ’ä»¶\nè®¾ç½®ç®¡ç†å‘˜è´¦å·\nlinyuan admin@123")]),e._v(" "),n("p",[e._v("ref: https://blog.csdn.net/BThinker/article/details/124178670\n2.  å®‰è£…minikubeï¼Œkubectl")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("https://minikube.sigs.k8s.io/docs/start/\ncurl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64\nsudo install minikube-linux-amd64 /usr/local/bin/minikube\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[e._v("å¯åŠ¨é›†ç¾¤")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('minikube start --image-repository=\'registry.cn-hangzhou.aliyuncs.com/google_containers\'  --image-mirror-country=cn  --kubernetes-version=v1.23.8  --registry-mirror=https://yf2c7vcr.mirror.aliyuncs.com\n\nminikube start --image-repository=\'registry.cn-hangzhou.aliyuncs.com/google_containers\'  --image-mirror-country=cn  --kubernetes-version=v1.23.8\n\nminikube start  --image-mirror-country=cn  --kubernetes-version=v1.23.8\n\nkubectl port-forward service/hello-minikube 10000:8080\n\nkubectl proxy --port=10000 --address="10.0.12.15 " --accept-hosts="^.*"\n\nminikube service  hello-minikube-fdf664d87-44jcl  --url\n\nkubectl expose deployment hello-minikube1 --type=LoadBalancer --port=8088\n\nğŸ˜„  minikube v1.28.0 on Darwin 13.0 (arm64)\nğŸ†•  Kubernetes 1.25.3 is now available. If you would like to upgrade, specify: --kubernetes-version=v1.25.3\nâœ¨  Using the docker driver based on existing profile\nğŸ‘  Starting control plane node minikube in cluster minikube\nğŸšœ  Pulling base image ...\n    > registry.cn-hangzhou.aliyun...:  0 B [___________________] ?% ? p/s 3m18s\nâ—  minikube was unable to download registry.cn-hangzhou.aliyuncs.com/google_containers/kicbase:v0.0.36, but successfully downloaded registry.cn-hangzhou.aliyuncs.com/google_containers/kicbase:v0.0.36 as a fallback image\nğŸ”¥  Creating docker container (CPUs=2, Memory=4000MB) ...\nâ—  This container is having trouble accessing https://registry.cn-hangzhou.aliyuncs.com/google_containers\nğŸ’¡  To pull new external images, you may need to configure a proxy: https://minikube.sigs.k8s.io/docs/reference/networking/proxy/\nğŸ³  Preparing Kubernetes v1.23.8 on Docker 20.10.20 ...\n    â–ª Generating certificates and keys ...\n    â–ª Booting up control plane ...\n    â–ª Configuring RBAC rules ...\nğŸ”  Verifying Kubernetes components...\n    â–ª Using image registry.cn-hangzhou.aliyuncs.com/google_containers/storage-provisioner:v5\nğŸŒŸ  Enabled addons: storage-provisioner, default-storageclass\n\nâ—  /opt/homebrew/bin/kubectl is version 1.25.4, which may have incompatibilities with Kubernetes 1.23.8.\n    â–ª Want kubectl v1.23.8? Try \'minikube kubectl -- get pods -A\'\nğŸ„  Done! kubectl is now configured to use "minikube" cluster and "default" namespace by default\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br"),n("span",{staticClass:"line-number"},[e._v("23")]),n("br"),n("span",{staticClass:"line-number"},[e._v("24")]),n("br"),n("span",{staticClass:"line-number"},[e._v("25")]),n("br"),n("span",{staticClass:"line-number"},[e._v("26")]),n("br"),n("span",{staticClass:"line-number"},[e._v("27")]),n("br"),n("span",{staticClass:"line-number"},[e._v("28")]),n("br"),n("span",{staticClass:"line-number"},[e._v("29")]),n("br"),n("span",{staticClass:"line-number"},[e._v("30")]),n("br"),n("span",{staticClass:"line-number"},[e._v("31")]),n("br"),n("span",{staticClass:"line-number"},[e._v("32")]),n("br"),n("span",{staticClass:"line-number"},[e._v("33")]),n("br"),n("span",{staticClass:"line-number"},[e._v("34")]),n("br"),n("span",{staticClass:"line-number"},[e._v("35")]),n("br")])]),n("p",[e._v("çœ‹åˆ°Doneï¼Œè¡¨ç¤ºé›†ç¾¤OK")]),e._v(" "),n("ol",{attrs:{start:"4"}},[n("li",[e._v("ä¸é›†ç¾¤äº¤äº’\nã€Œåˆå§‹åŒ–æ‰§è¡Œå‘½ä»¤ç»“æœã€")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('thinker@Thinker .k8s % minikube kubectl -- get pods -A  \nNAMESPACE     NAME                               READY   STATUS    RESTARTS   AGE\nkube-system   coredns-65c54cc984-hcpd2           1/1     Running   0          5h12m\nkube-system   etcd-minikube                      1/1     Running   0          5h13m\nkube-system   kube-apiserver-minikube            1/1     Running   0          5h13m\nkube-system   kube-controller-manager-minikube   1/1     Running   0          5h13m\nkube-system   kube-proxy-2xrts                   1/1     Running   0          5h12m\nkube-system   kube-scheduler-minikube            1/1     Running   0          5h13m\nkube-system   storage-provisioner                1/1     Running   0          5h13m\n\nkubectl get po -A \n\nNAMESPACE              NAME                                         READY   STATUS             RESTARTS      AGE\ndefault                      hello-minikube-fdf664d87-5rx5m         0/1     ImagePullBackOff   0             37h\nkube-system            coredns-65c54cc984-sxjb7                  1/1     Running            2 (14m ago)   38h\nkube-system            etcd-minikube                                      1/1     Running            2 (14m ago)   38h\nkube-system            kube-apiserver-minikube                      1/1     Running            2 (14m ago)   38h\nkube-system            kube-controller-manager-minikube       1/1     Running            2 (14m ago)   38h\nkube-system            kube-proxy-rvfbr                                  1/1     Running            2 (14m ago)   38h\nkube-system            kube-scheduler-minikube                      1/1     Running            2 (14m ago)   38h\nkube-system            storage-provisioner                              1/1     Running            2 (14m ago)   38h\nkubernetes-dashboard   dashboard-metrics-scraper-57d8d5b8b8-8d6mw   0/1     ImagePullBackOff   0             38h\nkubernetes-dashboard   kubernetes-dashboard-6f75b5c656-v7ssx        0/1     ImagePullBackOff   0             38h\n\nkubectl describe pod dashboard-metrics-scraper-57d8d5b8b8-8d6mw  æŸ¥çœ‹è¯¦æƒ…ï¼Œä¸ºå•¥ImagePullBackOff\n\nFailed to pull image "nginx:1.14.2": rpc error: code = Unknown desc = Error response from daemon: Get "https://registry-1.docker.io/v2/"\n\nä½¿ç”¨minikube sshå‘½ä»¤è¿æ¥åˆ°è™šæ‹Ÿæœºç¯å¢ƒã€‚\nminikube ssh\n\nä½¿ç”¨å›½å†…é•œåƒæºè·å–é•œåƒæ–‡ä»¶\ndocker pull registry.cn-hangzhou.aliyuncs.com/google_containers/nginx:1.14.2\n\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br"),n("span",{staticClass:"line-number"},[e._v("23")]),n("br"),n("span",{staticClass:"line-number"},[e._v("24")]),n("br"),n("span",{staticClass:"line-number"},[e._v("25")]),n("br"),n("span",{staticClass:"line-number"},[e._v("26")]),n("br"),n("span",{staticClass:"line-number"},[e._v("27")]),n("br"),n("span",{staticClass:"line-number"},[e._v("28")]),n("br"),n("span",{staticClass:"line-number"},[e._v("29")]),n("br"),n("span",{staticClass:"line-number"},[e._v("30")]),n("br"),n("span",{staticClass:"line-number"},[e._v("31")]),n("br"),n("span",{staticClass:"line-number"},[e._v("32")]),n("br"),n("span",{staticClass:"line-number"},[e._v("33")]),n("br"),n("span",{staticClass:"line-number"},[e._v("34")]),n("br")])]),n("ol",{attrs:{start:"5"}},[n("li",[e._v("è¿è¡Œdashboardï¼Œå¯æµè§ˆå™¨è®¿é—®ã€Œã€")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('minikube dashboard\nminikube dashboard --alsologtostderr -v=1 ï¼ˆå¯æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼‰\n\nkubectl get pods --all-namespaces æŸ¥çœ‹æ‰€æœ‰pod\nkubectl logs --namespace=kubernetes-dashboard kubernetes-dashboard-6f75b5c656-tvxzf\n\n$ minikube dashboard --url  ï¼ˆè·å–dashboardé“¾æ¥ï¼‰\nğŸ¤”  Verifying dashboard health ...\nğŸš€  Launching proxy ...\nğŸ¤”  Verifying proxy health ...\nhttp://127.0.0.1:29325/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/\nè¿™ä¸ªæ˜¯å®¹å™¨å†…çš„åœ°å€ï¼Œåªèƒ½å†…ç½‘è®¿é—®ï¼Œéœ€è¦kubectlä»£ç†å‡ºæ¥\næŸ¥çœ‹äº‘æœåŠ¡å†…ç½‘IPï¼Œæ–°æ‰“å¼€ä¸€ä¸ªç»ˆç«¯ï¼š\nkubectl proxy --port=10000 --address="10.0.12.15" --accept-hosts="^.*"\nStarting to serve on 10.0.12.15:10000\nç„¶åå¤–éƒ¨å³å¯è®¿é—®\nhttp://175.178.125.91:10000/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/#/workloads?namespace=default\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br")])]),n("p",[e._v("kubectl port-forward service/hello 9999:80")]),e._v(" "),n("p",[e._v("kubectl create deployment hello2 --image=kicbase/echo-server:1.0\nkubectl expose deployment hello2 --type=NodePort --port=10001\nkubectl port-forward service/hello2 10001:10001\nkubectl port-forward --address 0.0.0.0 -n default service/hello2  31107:31107\nkubectl get pods\nkubectl exec hello-b7b6dcbf7-lz6k7 -- curl -s 10.109.40.34")]),e._v(" "),n("ol",{attrs:{start:"6"}},[n("li",[e._v("éƒ¨ç½²åº”ç”¨")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("thinker@Thinker .k8s % kubectl create deployment hello-minikube --image=kicbase/echo-server:1.0\ndeployment.apps/hello-minikube created\n\nthinker@Thinker .k8s % kubectl expose deployment hello-minikube --type=NodePort --port=10000\nservice/hello-minikube exposed\n\nthinker@Thinker .k8s % kubectl get services hello-minikube\nNAME             TYPE       CLUSTER-IP       EXTERNAL-IP   PORT(S)           AGE\nhello-minikube   NodePort   10.110.155.103   <none>        10000:30910/TCP   24s\n\nthinker@Thinker .k8s % minikube service hello-minikube\n|-----------|----------------\t|-------------\t|---------------------------|\n| NAMESPACE\t|      NAME\t\t\t| TARGET PORT\t|            URL\t\t\t|\n|-----------|----------------\t|-------------\t|---------------------------|\n| default\t| hello-minikube\t|       10000\t| http://192.168.49.2:30910\t|\n|-----------|----------------\t|-------------\t|---------------------------|\nğŸƒ  Starting tunnel for service hello-minikube.\n|-----------|----------------|-------------|------------------------|\n| NAMESPACE |      NAME      | TARGET PORT |          URL           |\n|-----------|----------------|-------------|------------------------|\n| default   | hello-minikube |             | http://127.0.0.1:57824 |\n|-----------|----------------|-------------|------------------------|\nğŸ‰  Opening service default/hello-minikube in default browser...\nâ—  Because you are using a Docker driver on darwin, the terminal needs to be open to run it.\n\nè™½ç„¶éƒ¨ç½²æ˜¾ç¤ºè¿è¡Œ10000ç«¯å£ï¼Œ ä½†æ˜¯ç°åœ¨è®¿é—® 10000æ˜¯ä¸é€šçš„ï¼Œ è¿™ä¸ªç«¯å£æ˜¯è¿è¡Œåœ¨è‡ªèº«çš„å®¹å™¨é‡Œï¼Œ æƒ³è¦å¤–éƒ¨è®¿é—®ï¼Œéœ€è¦åœ¨å¤–éƒ¨ç«¯å£å’Œå®¹å™¨çš„10000ç«¯å£ä¹‹é—´åšä¸€ä¸ªæ˜ å°„\nkubectl port-forward service/hello-minikube 10000:10000\n\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br"),n("span",{staticClass:"line-number"},[e._v("23")]),n("br"),n("span",{staticClass:"line-number"},[e._v("24")]),n("br"),n("span",{staticClass:"line-number"},[e._v("25")]),n("br"),n("span",{staticClass:"line-number"},[e._v("26")]),n("br"),n("span",{staticClass:"line-number"},[e._v("27")]),n("br"),n("span",{staticClass:"line-number"},[e._v("28")]),n("br")])]),n("ol",{attrs:{start:"7"}},[n("li",[e._v("kubectlåŸºæœ¬æ“ä½œ")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v('åˆ—å‡ºkubernetesé›†ç¾¤ä¸­çš„å¯ç”¨æœåŠ¡\nkubectl get svc --all-namespaces -o wide\n\næŸ¥çœ‹æŸæœåŠ¡çš„è¯¦ç»†ä¿¡æ¯ï¼ˆhello-minikube ä¸ºnameå­—æ®µå¯¹åº”å€¼ï¼‰\nkubectl describe svc hello-minikube --namespace=default\n\nåˆ é™¤æœåŠ¡\nkubectl delete svc --namespace=default  hello-minikube\n\nk8sä¸­æ­£ç¡®åˆ é™¤ä¸€ä¸ªpod\n1ã€å…ˆåˆ é™¤pod\n2ã€å†åˆ é™¤å¯¹åº”çš„deployment\nåˆ é™¤pod\nthinker@Thinker .k8s % kubectl get pods  \nNAME                             READY   STATUS             RESTARTS   AGE\nbalanced-5f95856476-2w62s        0/1     ImagePullBackOff   0          37m\nhello-minikube-fdf664d87-5dszd   0/1     ImagePullBackOff   0          35m\nthinker@Thinker .k8s % kubectl delete pod hello-minikube-fdf664d87-5dszd\npod "hello-minikube-fdf664d87-5dszd" deleted\nåˆ é™¤deployment\nthinker@Thinker .k8s % kubectl get deployment\nNAME             READY   UP-TO-DATE   AVAILABLE   AGE\nbalanced         0/1     1            0           39m\nhello-minikube   0/1     1            0           38m\nthinker@Thinker .k8s % kubectl delete deployment hello-minikube\ndeployment.apps "hello-minikube" deleted\n')])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br"),n("span",{staticClass:"line-number"},[e._v("23")]),n("br"),n("span",{staticClass:"line-number"},[e._v("24")]),n("br"),n("span",{staticClass:"line-number"},[e._v("25")]),n("br"),n("span",{staticClass:"line-number"},[e._v("26")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("useradd -d /usr/docker -m docker\nusermod -a -G docker docker\ngroupadd docker\nuseradd -G docker ubuntu\nubuntu@VM-12-15-ubuntu:~$ sudo more /etc/sudoers\n\nè§£å†³\nsudo: /etc/sudoers is world writable\nsudo: no valid sudoers sources found, quitting\nsudo: unable to initialize policy plugin\n\nhttps://iqcode.com/code/other/polkit-agent-helper-1-error-response-to-policykit-daemon-gdbuserrororgfreedesktoppolicykit1errorfailed-no-session-for-cookie\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br")])]),n("ol",{attrs:{start:"3"}},[n("li",[e._v("macæ“ä½œdocker")])]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("launchctl list | grep docker\nopen /Applications/Docker.app\n\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("ol",{attrs:{start:"4"}},[n("li",[e._v("å‚è€ƒï¼šhttps://minikube.sigs.k8s.io/docs/start/")])]),e._v(" "),n("p",[e._v("å¯åŠ¨ minikube\nminikube æ˜¯æœ¬åœ° Kubernetesï¼Œä¸“æ³¨äºè®© Kubernetes æ˜“äºå­¦ä¹ å’Œå¼€å‘ã€‚")]),e._v(" "),n("p",[e._v("æ‚¨åªéœ€è¦ Dockerï¼ˆæˆ–ç±»ä¼¼çš„å…¼å®¹ï¼‰å®¹å™¨æˆ–è™šæ‹Ÿæœºç¯å¢ƒï¼Œè€Œ Kubernetes åªéœ€ä¸€ä¸ªå‘½ä»¤ï¼šminikube start")]),e._v(" "),n("p",[e._v("ä½ éœ€è¦ä»€ä¹ˆ\n2 ä¸ªæˆ–æ›´å¤š CPU\n2GB å¯ç”¨å†…å­˜\n20GB å¯ç”¨ç£ç›˜ç©ºé—´\nç½‘ç»œè¿æ¥\nå®¹å™¨æˆ–è™šæ‹Ÿæœºç®¡ç†å™¨ï¼Œä¾‹å¦‚ï¼šDockerã€QEMUã€Hyperkitã€Hyper-Vã€KVMã€Parallelsã€Podmanã€VirtualBoxæˆ–VMware Fusion/Workstation\n1å®‰è£…\nå•å‡»æè¿°æ‚¨çš„ç›®æ ‡å¹³å°çš„æŒ‰é’®ã€‚å¯¹äºå…¶ä»–æ¶æ„ï¼Œè¯·å‚é˜…å‘å¸ƒé¡µé¢ä»¥è·å– minikube äºŒè¿›åˆ¶æ–‡ä»¶çš„å®Œæ•´åˆ—è¡¨ã€‚")]),e._v(" "),n("p",[e._v("æ“ä½œç³»ç»Ÿ")]),e._v(" "),n("p",[e._v("å»ºç­‘å­¦")]),e._v(" "),n("p",[e._v("å‘å¸ƒç±»å‹")]),e._v(" "),n("p",[e._v("å®‰è£…ç¨‹åºç±»å‹")]),e._v(" "),n("p",[e._v("è¦ä½¿ç”¨äºŒè¿›åˆ¶ä¸‹è½½åœ¨x86-64 macOSä¸Šå®‰è£…æœ€æ–°çš„ minikubeç¨³å®šç‰ˆæœ¬ï¼š")]),e._v(" "),n("p",[e._v("curl -LO https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64\nsudo install minikube-darwin-amd64 /usr/local/bin/minikube\n2å¯åŠ¨é›†ç¾¤\nä»å…·æœ‰ç®¡ç†å‘˜è®¿é—®æƒé™çš„ç»ˆç«¯ï¼ˆä½†æœªä»¥æ ¹ç”¨æˆ·èº«ä»½ç™»å½•ï¼‰è¿è¡Œï¼š")]),e._v(" "),n("p",[e._v("minikube start\nå¦‚æœ minikube æ— æ³•å¯åŠ¨ï¼Œè¯·å‚é˜…é©±åŠ¨ç¨‹åºé¡µé¢ä»¥å¸®åŠ©è®¾ç½®å…¼å®¹çš„å®¹å™¨æˆ–è™šæ‹Ÿæœºç®¡ç†å™¨ã€‚")]),e._v(" "),n("p",[e._v("3ä¸æ‚¨çš„é›†ç¾¤äº¤äº’\nå¦‚æœä½ å·²ç»å®‰è£…äº† kubectlï¼Œä½ ç°åœ¨å¯ä»¥ä½¿ç”¨å®ƒæ¥è®¿é—®ä½ é—ªäº®çš„æ–°é›†ç¾¤ï¼š")]),e._v(" "),n("p",[e._v("kubectl get po -A\næˆ–è€…ï¼Œminikube å¯ä»¥ä¸‹è½½åˆé€‚ç‰ˆæœ¬çš„ kubectlï¼Œä½ åº”è¯¥å¯ä»¥åƒè¿™æ ·ä½¿ç”¨å®ƒï¼š")]),e._v(" "),n("p",[e._v("minikube kubectl -- get po -A\næ‚¨è¿˜å¯ä»¥é€šè¿‡å°†ä»¥ä¸‹å†…å®¹æ·»åŠ åˆ°æ‚¨çš„ shell é…ç½®ä¸­æ¥è®©æ‚¨çš„ç”Ÿæ´»æ›´è½»æ¾ï¼š")]),e._v(" "),n("p",[e._v('alias kubectl="minikube kubectl --"\næœ€åˆï¼ŒæŸäº›æœåŠ¡ï¼ˆä¾‹å¦‚å­˜å‚¨ä¾›åº”å•†ï¼‰å¯èƒ½å°šæœªå¤„äºè¿è¡ŒçŠ¶æ€ã€‚è¿™æ˜¯é›†ç¾¤å¯åŠ¨æœŸé—´çš„æ­£å¸¸æƒ…å†µï¼Œä¼šç«‹å³è‡ªè¡Œè§£å†³ã€‚ä¸ºäº†è¿›ä¸€æ­¥äº†è§£æ‚¨çš„é›†ç¾¤çŠ¶æ€ï¼Œminikube æ†ç»‘äº† Kubernetes ä»ªè¡¨æ¿ï¼Œè®©æ‚¨è½»æ¾é€‚åº”æ–°ç¯å¢ƒï¼š')]),e._v(" "),n("p",[e._v("minikube dashboard\n4éƒ¨ç½²åº”ç”¨\næœåŠ¡\nè´Ÿè½½å‡è¡¡å™¨\nå…¥å£\nåˆ›å»ºç¤ºä¾‹éƒ¨ç½²å¹¶å°†å…¶å…¬å¼€åœ¨ç«¯å£ 8080 ä¸Šï¼š")]),e._v(" "),n("p",[e._v("kubectl create deployment hello-minikube --image=kicbase/echo-server:1.0\nkubectl expose deployment hello-minikube --type=NodePort --port=8080\nè¿™å¯èƒ½éœ€è¦ä¸€ç‚¹æ—¶é—´ï¼Œä½†æ‚¨çš„éƒ¨ç½²å°†åœ¨æ‚¨è¿è¡Œæ—¶å¾ˆå¿«æ˜¾ç¤ºå‡ºæ¥ï¼š")]),e._v(" "),n("p",[e._v("kubectl get services hello-minikube\nè®¿é—®æ­¤æœåŠ¡çš„æœ€ç®€å•æ–¹æ³•æ˜¯è®© minikube ä¸ºæ‚¨å¯åŠ¨ä¸€ä¸ªç½‘ç»œæµè§ˆå™¨ï¼š")]),e._v(" "),n("p",[e._v("minikube service hello-minikube\næˆ–è€…ï¼Œä½¿ç”¨ kubectl è½¬å‘ç«¯å£ï¼š")]),e._v(" "),n("p",[e._v("kubectl port-forward service/hello-minikube 7080:8080\nå¤šç”°ï¼æ‚¨çš„åº”ç”¨ç¨‹åºç°åœ¨å¯ä»¥åœ¨http://localhost:7080/è·å¾—ã€‚")]),e._v(" "),n("p",[e._v("æ‚¨åº”è¯¥èƒ½å¤Ÿåœ¨åº”ç”¨ç¨‹åºè¾“å‡ºä¸­çœ‹åˆ°è¯·æ±‚å…ƒæ•°æ®ã€‚å°è¯•æ›´æ”¹è¯·æ±‚çš„è·¯å¾„å¹¶è§‚å¯Ÿæ›´æ”¹ã€‚åŒæ ·ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œ POST è¯·æ±‚å¹¶è§‚å¯Ÿè¾“å‡ºä¸­æ˜¾ç¤ºçš„æ­£æ–‡ã€‚")]),e._v(" "),n("p",[e._v("5ç®¡ç†æ‚¨çš„é›†ç¾¤\nåœ¨ä¸å½±å“éƒ¨ç½²çš„åº”ç”¨ç¨‹åºçš„æƒ…å†µä¸‹æš‚åœ Kubernetesï¼š")]),e._v(" "),n("p",[e._v("minikube pause\nå–æ¶ˆæš‚åœæš‚åœçš„å®ä¾‹ï¼š")]),e._v(" "),n("p",[e._v("minikube unpause\nåœæ­¢é›†ç¾¤ï¼š")]),e._v(" "),n("p",[e._v("minikube stop\næ›´æ”¹é»˜è®¤å†…å­˜é™åˆ¶ï¼ˆéœ€è¦é‡æ–°å¯åŠ¨ï¼‰ï¼š")]),e._v(" "),n("p",[e._v("minikube config set memory 9001\næµè§ˆæ˜“äºå®‰è£…çš„ Kubernetes æœåŠ¡çš„ç›®å½•ï¼š")]),e._v(" "),n("p",[e._v("minikube addons list\nåˆ›å»ºç¬¬äºŒä¸ªè¿è¡Œè¾ƒæ—§ Kubernetes ç‰ˆæœ¬çš„é›†ç¾¤ï¼š")]),e._v(" "),n("p",[e._v("minikube start -p aged --kubernetes-version=v1.16.1\nåˆ é™¤æ‰€æœ‰ minikube é›†ç¾¤ï¼š")]),e._v(" "),n("p",[e._v("minikube delete --all")]),e._v(" "),n("p",[e._v("##############################################\nhostnamectl set-hostname  k8s-master-91\nhostnamectl set-hostname k8s-node-93")]),e._v(" "),n("p",[e._v("cat >> /etc/hosts<<EOF\n175.178.125.91 k8s-master-91\n39.98.45.93 k8s-node-93\nEOF")]),e._v(" "),n("p",[e._v("ssh-copy-id -i ~/.ssh/id_rsa.pub root@k8s-master-91\nssh-copy-id -i ~/.ssh/id_rsa.pub root@k8s-node-93")])])}),[],!1,null,null,null);s.default=t.exports}}]);